<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[微个日光日]]></title>
  <link href="http://xiebaochun.github.io/atom.xml" rel="self"/>
  <link href="http://xiebaochun.github.io/"/>
  <updated>2014-07-03T19:11:01+08:00</updated>
  <id>http://xiebaochun.github.io/</id>
  <author>
    <name><![CDATA[Nicholas]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[rigging_and_skeletal_animation_in_three.js]]></title>
    <link href="http://xiebaochun.github.io/blog/2014/07/01/rigging-and-skeletal-animation-in-three-dot-js/"/>
    <updated>2014-07-01T11:16:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2014/07/01/rigging-and-skeletal-animation-in-three-dot-js</id>
    <content type="html"><![CDATA[<p>JavaScript
and stuff
github.com/roman01la
Rigging and skeletal animation in Three.js
Update: Do not move/rotate the armature, this will cause geometry stretching. Align the first bone using its tail/head position
Three.js supports some basic rigging and skeletal animation. The simplest way to achieve a nice character animation is to make it in appropriate software first. This article is going to be about Blender rigging workflow and how to do the best for a clean Three.js export.
Here’s a very nice and detailed article about rigging and animating in Blender with further exporting and scene setup in Three.js. Actually I got this thing after reading the article. Here’s my, actually same, workflow, but with some tips and additions.
That’s what we’ll get when all thing will be done.</p>

<p>Lets create a simple shape. You’ll need Blender itself and exporter script, check the article about external models to find out.
Create a mesh
Remove camera and light from the scene and extrude the box. Select it with RMB, go into Edit mode with Tab, hit A to unselect the object, hit Ctrl+Tab and select Face select mode. Select one face with RMB, hit E, hold Ctrl and drag the mouse to extrude the face. Drag it until you get another cube in same size. Click LMB and release Ctrl key. Do the process for one more time to make another cube.</p>

<p>Create an armature
Now, add an armature. Hit Z to go to Wireframe view mode. Hit Shift+A, select Armature -&gt; Single Bone, this will add a bone. Rotate and position the bone as shown below. Position the bone using its tail/head position. Select armature, go to Edit mode, select bone, hit E, hold Ctrl and drag to create a new bone. Create another two bones, so you’ll get four bones armature.</p>

<p>Create and assign vertex groups
So here we have a mesh and an armature, the next step is to assign the geometry to the appropriate bones. It can be done in two ways: automatic assignment and manual. I prefer manual, you can choose assignment polygons more precisely.
Each set of polys is called a vertex group, and the name of the group should be exact same like the name of the bone we want assign to. Usually, in Blender, the first bone name is Bone, the second one is Bone.001, the next is Bone.002 and so on.
Select the mesh and go to Edit mode. Go to Object Data tab in the Properties panel. Hit + under the Vertex Groups list to add a new group, call it Bone.001, this is the second bone of the armature. Choose Face select mode and select all five faces of the first cube with Shift+RMB. Once you’ve done make sure that the right vertex group is chosen, hit Assign button under Vertex Groups. Now the first cube geometry will be transformed with its bone. You can check the assignment by selecting a vertex group and hit Select button, if there are extra faces, select only them and hit Remove button. Repeat the process for the rest of the mesh.
Tip: For more complex geometry to create nearby vertex groups and make sure that there are no same faces assigned to both, create the first vertex group, select it in the list, hit select to select its faces, select all faces of the second vertex group which are the nearest to first group faces, make sure the first vertex group is selected, hit Deselect and you’ll get edge selection which is a boundary between two groups. Now you create the second vertex group based on that line.
Tip: When the armature is about to have a static geometry, read further about it, it also must be assigned to its bone, otherwise it won’t be visible. So, we need to select all the faces that are not belong to any other vertex groups. The trick here is to select all groups (choose group in the list and hit Select) and then hit Ctrl+I which states for Inverse Selection, selected faces can be assigned to static vertex group.</p>

<p>There’s one more action required to finish with assignment. We need to parent the mesh to the armature. Go to Object mode, select mesh, go to Object tab in the Properties panel and hit Parent box under relations section, select Armature object. Hit the box below and select Armature from the list. If the mesh has changed its position, align it back to the bones.
Animate the armature
The armature is ready for animation. Make sure the mark is in the first frame position on the timeline. Select the armature and go to Pose mode (Ctrl+Tab), select the bone, hit I to add a keyframe and choose LocRotScale. Move the mark to frame 10 and move the bone, add another keyframe. Do it with all bones and play with position and time, except the first one. The first bone is the support bone and it should be static. Do not change its position, just add a keyframe in the first frame. This is useful when you are doing a hand animation, for example, where only fingers are moving and the hand itself should be static. Select the last keyframe of the animation and hit E to set the end of the anim. Three.js will play the animation from the first to the last defined keyframes. That means if you have a gap before the first keyframe, it won’t be played. Just add another keyframe in the first frame position to make that gap playable in Three.js.</p>

<p>In the article I’ve mentioned at the beginning there’s a section about removing unused actions of the animation, to make sure Three.js will play the right one. This is a good point, but is not required if you are making all stuff carefully. But still, read about it.
Export the model
If everything is ok and you are happy with your skeleton and anim, it’s time to export things. Make sure you have installed exporter script. Select both mesh and armature. Go to File -&gt; Export -&gt; Three.js. Enable the next options in the Export Three.js section: skinning, bones and skeletal animation. Export the model.
Setup Three.js scene
Use a scene setup from one of the previous articles, adjust light and camera position.
We need a loader to load the model, create SkinnedMesh instance using model geometry and materials and enable skinning on its materials.
var loader = new THREE.JSONLoader();
var animation;</p>

<p>// load the model and create everything
loader.load(‘model.js’, function (geometry, materials) {
  var mesh, material;</p>

<p>// create a mesh
  mesh = new THREE.SkinnedMesh(
    geometry,
    new THREE.MeshFaceMaterial(materials)
  );</p>

<p>// define materials collection
  material = mesh.material.materials;</p>

<p>// enable skinning
  for (var i = 0; i &lt; materials.length; i++) {
    var mat = materials[i];</p>

<pre><code>mat.skinning = true;   }
</code></pre>

<p>scene.add(mesh);</p>

<p>// add animation data to the animation handler
  THREE.AnimationHandler.add(mesh.geometry.animation);</p>

<p>// create animation
  animation = new THREE.Animation(
    mesh,
    ‘ArmatureAction’,
    THREE.AnimationHandler.CATMULLROM
  );</p>

<p>// play the anim
  animation.play();</p>

<p>render();
});</p>

<p>function render() {
  animation.update(.01);
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}
9 months ago
#webgl  #threejs  #blender  #rigging  #skeletal animation
8 notes</p>

<p>mashabatsea likes this</p>

<p>jhclaura likes this</p>

<p>laugharne-me reblogged this from roman01la</p>

<p>recto-ver-so likes this</p>

<p>oivoodoo likes this</p>

<p>paraknight likes this</p>

<p>prostheticknowledge likes this</p>

<p>datahacker likes this</p>

<p>roman01la posted this
Ashley theme by Jxnblk</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[webgl_with_three.js:basicst(three.js基础入门）]]></title>
    <link href="http://xiebaochun.github.io/blog/2014/06/30/webgl-with-three-dot-js-basics/"/>
    <updated>2014-06-30T14:53:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2014/06/30/webgl-with-three-dot-js-basics</id>
    <content type="html"><![CDATA[<p>先来一段废话：3D graphics in the browser have been a hot topic ever since it was first introduced. But if you were to create your apps using plain WebGL, it would take ages. This is exactly why some really useful libraries have recently came about. Three.js is one of the most popular, and in this series I will show you how best to use it in order to create stunning 3D experiences for your users.</p>

<p>Before we begin, I do expect you to have a basic understanding of 3D space before you start reading this tutorial, as I won’t be explaining stuff like coordinates, vectors, etc.</p>

<!--more-->

<h2 id="step1">step1:准备</h2>

<p>准备三文件：index.html,main.js,style.css.下面是代码：</p>

<p>index.html:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;link rel="stylesheet" href="./style.css"&gt;
&lt;script src="./three.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script src="./main.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>引入样式和脚本，为了好看点，在style.css中添加如下code:</p>

<pre><code>canvas {
position: fixed;
top: 0;
left: 0;
}
</code></pre>

<p>这样canvas将会位于页面左上角，默认情况下body的margin是8像素。</p>

<h2 id="step2">step2:场景和渲染器</h2>

<p>three.js的物件渲染方式是：将所有物件放到一个显示列表中，然后将它们渲染到屏幕。</p>

<p>这里有一个THREE.Scene的对象，他就是存放所有要显示的物件的地方。一个渲染器同时只能渲染一个场景，但是你可以在不同场景之间来回切换。</p>

<p>渲染器只是将所有的物件从场景中渲染到webgl的canvas。但这货也支持SVG或者2D canvas,但是这里只会将webgl中的canvas。（如果不知道它们之间的区别，可以google或者aol，但不要度娘）。</p>

<p>然后将窗口的宽和高存放在俩变量中，方便后面使用，实在不想定义也可以。</p>

<pre><code>var width=window.innerWidth;
var height=window.innerHeight;
</code></pre>

<p>接着定义渲染器和场景，别偷懒，这个一定要有。</p>

<pre><code>//创建webgl渲染器，antialias设为true,使物件边缘光滑一点
var renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(width,height);//设置渲染的尺寸
//在页面中插入webgl canvas这货
document.body.appendChild(renderer.domElement);
//创建场景
var scene=new THREE.Scene;
</code></pre>

<p>在倒数第二行，你也可以用你喜欢的Jquery来向页面中插入canvas元素：</p>

<pre><code>$('body').append(renderer.domElement));
</code></pre>

<h2 id="step3">step3：添加立方体</h2>

<p>就像学习任何一门语言一样，一开始通常会写一个hello world！的demo。学习3D引擎，通常会绘制一个立方体。</p>

<p><a href="http://code.tutsplus.com/tutorials/webgl-with-threejs-basics--net-35688">http://code.tutsplus.com/tutorials/webgl-with-threejs-basics–net-35688</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[webgl之three.js模型和动画]]></title>
    <link href="http://xiebaochun.github.io/blog/2014/06/29/webgl-with-the-three-dot-js-models-and-animation/"/>
    <updated>2014-06-29T21:22:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2014/06/29/webgl-with-the-three-dot-js-models-and-animation</id>
    <content type="html"><![CDATA[<p>自从3d图形被引入浏览器，浏览器中的3D图形开发就变成一个热门的话题。但是如果你直接使用原始的webgl api来开发应用将会很费劲。因此诞生了很多与之相关的类库。three.js是最流行的一个，在此文中我将介绍它。</p>

<p><a href="http://xiebaochun.github.io/mylab/webgl/webgl-models-animation/final/">在线演示</a> <a href="https://github.com/xiebaochun/webgl-models-animation">源码下载</a></p>

<p>在开始本文之前，我默认你已经具有了3D空间的基本知识，比如坐标和向量等。
<!--more--></p>

<h2 id="section">准备:</h2>
<p>本文将在之前的代码基础上开始。下载并解压我提供的资源，你就可以开始了。</p>

<h2 id="step1blender">step1:在blender中导出模型</h2>
<p>在blender中导出three.js支持的模型，你需要注意以下几点：</p>

<p><strong>- 首先，remove the parenting。</strong>three.js导出插件不会导出任何你留下的动画（还有Armature Modifier）</p>

<p><strong>- 其次，群组顶点。</strong>如想让骨骼移动移动时，周围的顶点也随之移动，那么就必须将他们群组起来，并将组的名字命名为骨骼的名字。</p>

<p><strong>- 第三，可以只有一个动画。</strong>这可能是一个大问题，但是之后我会解释。</p>

<p>同样，当你导出时，在导出器中确保一下这些选项都勾选了：skinning,Bones和Skeletal Animation(骨骼动画）。</p>

<h2 id="step2">step2:导入模型</h2>

<p>导入模型非常的简单。这里有一个特殊类，即THREE.JSONLoader（他会为我们处理所有的导入相关工作。当然，它只能导入JSON格式的models,但是three.js建议使用他们，所以我将只介绍这个loader（其他的loader也是一样的）。让我们首先初始化它:</p>

<pre><code>var loader=new THREE.JSONLoader;
var animation;
</code></pre>

<p>这里不需要参数。我们需要为动画定义一个变量，这样我们可以在后面访问它。现在我们可以加载模型了：</p>

<pre><code>loader.load('./model.js',function(geometry,materials){
var skinnedMesh=new THREE.SkinnedMesh(geometry,new THREE.MeshFaceMaterial(materials));
skinnedMesh.positon.y=50;
skinnedMesh.scale.set(15,15,15);
scene.add(skinnedMesh);

animate(skinnedMesh);
});
</code></pre>

<p>此load方法接受两个参数：一个是model的path,还有一个是回调函数。这个回调函数在导入model完成后被调用（你可以在此之前显示一个加载进度条给用户）。这个回调函数调用时将会传入两个参数：一个是model的几何体和它的材质（随model一起导出来的）。在这个回调函数中，我们创建了mesh。但是这次的是THREE.SkinnedMesh，它支持动画。</p>

<p>接下来，我们将model往上移动50个单位，置于立方体的顶端，将其放大15倍（因为它很小，在blender制作中），并将其添加到场景中。接下来我们调用aimate函数，它会配置并运行动画。</p>

<h2 id="step3">step3:动画</h2>

<p>现在我们配置动画。下面是animate函数的原型：</p>

<pre><code>function animate(skinnedMesh){
  var mterials=skinnedMesh.material.materials;

  for(var k in materials){
 materials[k].skinning=true;
}

 THREE.AnimationHeander.add(skinnedMesh.geometry.animation);
  animation=new THREE.Animation(skinnedMesh,"ArmatureAction",THREE.AnimationHander.CATMULLROM);
  animation.play();
}
</code></pre>

<p>首先我们必须开启model中所有部件的蒙皮动画。接下来，必须将model中的动画（animation）添加到THREE.AnimationHandler并创建THREE.Animation对象。参数依次为：mesh（动画网格），model中的动画名称和插值类型（在像人这种复杂模型中很有用，可以使网格平滑过渡）。最后，我们执行动画。</p>

<p>但是现在打开浏览器的话，你会发现模型并没有动。</p>

<p><img src="https://cdn.tutsplus.com/net/uploads/2013/12/model_still.png" alt="" /></p>

<p>为此，我们需要添加一行代码到render函数中，就是位于particleSystem旋转的下面：</p>

<pre><code>if(animation) animation.update(delta);
</code></pre>

<p>这样就可以定时更新动画了，因为THREE.AnimationHandler知道去渲染那一帧。现在打开浏览器，你将会看到顶部的立方体左右弯曲摆动。</p>

<p><img src="https://cdn.tutsplus.com/net/uploads/2013/12/model_animated.png" alt="" /></p>

<h2 id="step4">step4:多个动画</h2>

<p>现在model中只有一个动画队列，现在我们想将每个动画添加到一个队列中，当一个动画结束，另一个立马接着开始执行。接下来,在导出model后，需要修改动画代码。其中1-3秒为站立动画，从第三秒到最后为行走动画。然后在render函数中检查每一秒的动画名字，如果到了当前队列的最后时间，将停止动画并从新开始。</p>

<pre><code>var currentSequence='standing';

function(render){
...
   if(animation) animation.update(delta);
   if(currentSequence=='standing'){
  if(animation.currentTime&gt;4){
 animation.stop();
 animation.play(false,0);//play the animation not looped,from 0 0s
   }
 }else if(currentSequence=='walking'){
  if(animation.currentTime&lt;=4||aniamtion.currentTime&gt;8){
  animation.stop();
  animation.play(false,4);//play the animation not looped,from 4s
 }
  }
  ...
 }
</code></pre>

<p>在此，在正确的时间以非循环模式执行动画。当然，如果用户的帧率真的低的话，会出现怪异的现象，因为delta会更高，以致animation.cuurentTime可能比特定队列的限制时间大，从而会执行下一队列的部分动画。但是只要delta在300-500m之间，问题是不会太大的。</p>

<p>现在更改animate函数来执行行走动画，只要添加如下参数至animation.play中即可：</p>

<pre><code>animation.play(false,0);
</code></pre>

<p>我们也可以让用户通过按键a来切换动画。在文件的底部添加如下代码，只要在render()调用之前。</p>

<pre><code>document.addEventListenner('keyup',function(e){
  if(e.keyCode=="A'.charCodeAt(0)){
 currentSequece==(currentSequece=='standing'?'walking':'standing');
   }
});
</code></pre>

<h2 id="step5attach-to-bone">step5：Attach to bone（依附骨骼）</h2>

<p>此项技术非常适合RPG game(角色扮演游戏），但是也使用于其他一般的游戏。这涉及到将其他对象依附到骨骼动画对象中，比如衣服，武器，等。</p>

<p>让我们以loader.load回调函数开始吧，添加如下代码至scene.add（skinnedMesh）下面：</p>

<pre><code>item=new THREE.Mesh(new THREE.CubeGeometry(100,10,10),new THREE.MeshBasicMaterial({color:0xff0000}));
item.position.x=50;
pivot=new THREE.Object3D();
pivot.scale.set(0.15,0.15,0.15);
pivot=add(item);
pivot.useQuaternion=true;
skinnedMesh.add(pivot);
</code></pre>

<p>此item既是要模拟依附到动画对象中的一个物件。让他围绕着一个特定的点旋转，但是不是中心点，我们将为它添加一个pivot对象，并将其向右移动50个单位。并缩小至0.15倍，因为我么要将其添加到已经放大了15倍的skinnedMesh中。最后在将其添加至我们的动画中之前，我们命令它使用quaternions(四元数，矩阵）。</p>

<p>通常，四元数是一个数字系统，但是Three.js已经强大到不用我们去关心这些底层的数据了。如果你感兴趣的话可以google或者aol，但千万别度娘。这些四元数是用来旋转物件（也是对象），而不会出现gimbal lock的危险。</p>

<p>现在在render函数中，更新对象的位置和旋转：</p>

<pre><code>pivot.position=new THREE.Vector3().getPositionFromMatrix(skinnedMesh.bones[2].skinnedMatrix);
pivot.quaternion.setFromRotationMatrix(skinnedMesh.bones[2].skinnedMatrix);
</code></pre>

<p>在这里，首先我们将pivot的位置设为model最后一个骨骼的相同位置。我们使用skinnedMatrix属性来计算它。然后我们使用同样的属性来为pivot计算旋转矩阵。完之，打开浏览器，将会看见一个红色的物件（如下）依附到了我们的模型：</p>

<p><img src="https://cdn.tutsplus.com/net/uploads/2013/12/attach_to_bone.png" alt="" /></p>

<h2 id="section-1">总结：</h2>

<p>我希望你能在此文中能获得想要的知识点。文中代码工程可以免费下载并使用。下一次，我们将会介绍OpenGL/webGL的shader,即显卡编程。</p>

<p>这里提供一下3d模型下载的网址：
<a href="http://tf3dm.com/">http://tf3dm.com/</a>
<a href="http://www.turbosquid.com/Search/3D-Models/free/fbx">http://www.turbosquid.com/Search/3D-Models/free/fbx</a>
<a href="http://free.cgtrader.com/">http://free.cgtrader.com/</a></p>

<p><a href="http://code.tutsplus.com/tutorials/webgl-with-threejs-models-and-animation--net-35993">http://code.tutsplus.com/tutorials/webgl-with-threejs-models-and-animation–net-35993</a></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[javascript运行机制及其执行顺序]]></title>
    <link href="http://xiebaochun.github.io/blog/2014/06/27/javascript-operating-mechanisim-execution-sequnece/"/>
    <updated>2014-06-27T19:59:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2014/06/27/javascript-operating-mechanisim-execution-sequnece</id>
    <content type="html"><![CDATA[<p>在前端开发领域已有些年头了，对javascript的认识也逐渐清晰明朗，在不同时期对任何事物都有不同的了解，或程度上，或性质上。今天写一下我对javascript运行机制的一些总结。</p>

<p>javascript的性质：描述性脚本语言，直接由browser动态解析执行。</p>

<p>那么js的解析原理和执行顺序是怎么样的呢？在此先了解一下基本的一些概念。</p>

<!--more-->

<h2 id="js">1、js代码块</h2>
<p>例如：</p>

<pre><code>''' javascript hello word http://xiebaochun.github.io

&lt;script type="text/javascript&gt;
console.log("this is code block1");
&lt;/script&gt;
&lt;script type="text/javascript&gt;
console.log("this is code block2");
&lt;/script&gt;

'''
</code></pre>

<p>js按照代码块动态编译并执行，代码块之间相互独立，仅共享变量和方法。例如：</p>

<pre><code>&lt;script type="text/javascript"&gt;  
  console.log(str);//因为没有定义str，所以浏览器会出错，下面的不能运行  
  console.log("this is block1");//没有运行到这里  
  var test = "this is first varaible";  
&lt;/script&gt;  
&lt;script type="text/javascript"&gt;  
  console.log("this is block2"); //这里有运行到  
  console.log(test); //打印"我是代码块一变量"  
&lt;/script&gt; 
</code></pre>

<p>上面的代码中代码块1中会报错，但不影响代码块2的执行，此即其独立性。代码块2可调用块1中的变量，即块间共享性。</p>

<h2 id="section">2、声明式函数与赋值式函数</h2>
<p>js中，函数分为声明式函数与赋值式函数，具体可参考我之前写的<a href="http://xiebaochun.github.io/public/blog/2013/10/09/function-declarations-vs-function-expressions/">函数声明和函数表达式</a></p>

<p>这里简单举个例子：</p>

<pre><code>&lt;script type="text/javascript"&gt;  
     function Fn(){ //声明式函数  
      
     }  
      
     var Fn = function{  //赋值式函数（函数表达式）
      
     }  
&lt;/script&gt; 
</code></pre>

<p>重点理解：js预编译期，声明式函数会先被提取出来，然后再按顺序执行js代码。</p>

<h2 id="section-1">3、预编译期与执行期</h2>
<p>js解析分为：预编译期（预处理）与执行期。</p>

<p>重点提示：预编译期JS会对本代码块中的所有声明的变量和函数进行处理（类似与C语言的编译），但需要注意的是此时处理函数的只是声明式函数，而且变量也只是进行了声明但未进行初始化以及赋值。</p>

<p>如：</p>

<pre><code>&lt;script type="text/javascript"&gt;  
 Fn();  //执行结果："执行了函数2",同名函数后者会覆盖前者  
 function Fn(){ //函数1  
console.log("执行了函数1");  
 }  
  
 function Fn(){  //函数2  
console.log("执行了函数2");  
 }  
&lt;/script&gt;
</code></pre>

<hr />

<pre><code>&lt;script type="text/javascript"&gt;  
  Fn();  //执行结果："执行了声明式函数",在预编译期声明函数及被处理了，所以即使Fn()调用函数放在声明函数前也能执行。  
  function Fn(){ //声明式函数  
 console.log("执行了声明式函数");  
  }  
  
  var Fn = function(){  //赋值式函数  
 console.log("执行了赋值式函数");  
  }  
&lt;/script&gt; 
</code></pre>

<hr />

<pre><code>//代码块一  
&lt;script type="text/javascript"&gt;  
  console.log(str);//浏览器报错,但并没有弹出信息窗  
&lt;/script&gt;  
//代码块二  
&lt;script type="text/javascript"&gt;  
  console.log(str); //弹窗"undefined"  
  var str = "aaa";  
&lt;/script&gt;  
//js在预处理期对变量进行了声明处理,但是并没有进行初始化与赋值，所以导致代码块二中的变量是unfiened的，而代码一中的变量是完全不存在&lt;span style="font-family: Arial, Helvetica, sans-serif;"&gt;的，所以浏览器报错。&lt;/span&gt; 
</code></pre>

<p>理解了上面的几个术语，相信大家对JS的运行机制已经有了个大概的印象了，现在我们来看个例子：</p>

<pre><code>&lt;script type="text/javascript"&gt;  
  Fn();  //浏览器报错:"undefined"  
&lt;/script&gt;  
&lt;script type="text/javascript"&gt;  
  function Fn(){ //函数1  
  alert("执行了函数1");  
  }  
&lt;/script&gt;
</code></pre>

<p>为什么运行上面的代码浏览器会报错呢？声明函数不是会在预处理期就会被处理了吗，怎么还会找不到Fn()函数呢？其实这是一个理解误点，我们上面说了JS引擎是按照代码块来顺序执行的，其实完整的说应该是按照代码块来进行预处理和执行的，也就是说预处理的只是执行到的代码块的声明函数和变量，而对于还未加载的代码块，是没法进行预处理的，这也是边编译边处理的核心所在。</p>

<h2 id="section-2">总结：</h2>

<pre><code>  step 1.  读入第一个代码块。
  step 2.  做语法分析，有错则报语法错误（比如括号不匹配等），并跳转到step5。
  step 3.  对var变量和function定义做“预编译处理”（永远不会报错的，因为只解析正确的声明）。
  step 4.  执行代码段，有错则报错（比如变量未定义）。
  step 5.  如果还有下一个代码段，则读入下一个代码段，重复step2。
  step6. 结束。
</code></pre>

<p>而根据HTML文档流的执行顺序，需要在页面元素渲染前执行的js代码应该放在&lt;body&gt;前面的<script>代码块中，而需要在页面元素加载完后的js放在&lt;/body&gt;元素后面，body标签的onload事件是在最后执行的。</script></p>

<pre><code>&lt;script type="text/javascript"&gt;  
alert("first");  
function Fn(){  
alert("third");  
}  
&lt;/script&gt;  
&lt;body onload="Fn()"&gt;  
  
&lt;/body&gt;  
&lt;script type="text/javascript"&gt;  
alert("second");  
&lt;/script&gt;  
</code></pre>

<p>如果有什么问题可在留言板中留言，我会第一时间回答。</p>

<p>下面是测试数学公式：</p>

<script type="math/tex; mode=display">% &lt;![CDATA[

\begin{align*}
  & \phi(x,y) = \phi \left(\sum_{i=1}^n x_ie_i, \sum_{j=1}^n y_je_j \right)
  = \sum_{i=1}^n \sum_{j=1}^n x_i y_j \phi(e_i, e_j) = \\
  & (x_1, \ldots, x_n) \left( \begin{array}{ccc}
      \phi(e_1, e_1) & \cdots & \phi(e_1, e_n) \\
      \vdots & \ddots & \vdots \\
      \phi(e_n, e_1) & \cdots & \phi(e_n, e_n)
    \end{array} \right)
  \left( \begin{array}{c}
      y_1 \\
      \vdots \\
      y_n
    \end{array} \right)
\end{align*}
 %]]&gt;</script>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2013电商网站设计（E-Commerce Website Designs 2013）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/11/11/e-commerce-website-designs-2013/"/>
    <updated>2013-11-11T14:00:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/11/11/e-commerce-website-designs-2013</id>
    <content type="html"><![CDATA[<p><img src="http://www.script-tutorials.com/demos/365/thumb.png" alt="" /></p>

<p>原文地址：<a href="http://www.script-tutorials.com/e-commerce-website-designs-2013/">http://www.script-tutorials.com/e-commerce-website-designs-2013/</a></p>

<p>译者：微个日光日</p>

<!--more-->

<p>今天我想讨论的主题是电商，准确的说是探索一个关于在线商店设计思想。
在线商店的主人偶尔需要更新网站的设计，这里我想起了响应式模板和移动技术。每个人都知道移动技术正在快速的发展，几乎人人都有一部手机。响应式设计给我们提供了巨大的机会：网站访问的频率和增加的规模。在今天的文章中，我挑选了一些很有趣的响应式模板网站。</p>

<p>1.USM Modular Furniture</p>

<p><img src="http://www.script-tutorials.com/demos/365/img1.jpg" alt="" /></p>

<p>2.Bold &amp; Noble</p>

<p><img src="http://www.script-tutorials.com/demos/365/img2.jpg" alt="" /></p>

<p>3.Greats Brand</p>

<p><img src="http://www.script-tutorials.com/demos/365/img3.jpg" alt="" /></p>

<ol>
  <li>Create and customize your own cube</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img4.jpg" alt="" /></p>

<ol>
  <li>The Gadget Flow</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img5.jpg" alt="" /></p>

<ol>
  <li>Snipcart</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img6.jpg" alt="" /></p>

<ol>
  <li>Noodlebox</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img7.jpg" alt="" /></p>

<ol>
  <li>Burberry</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img8.jpg" alt="" /></p>

<ol>
  <li>Folksy</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img9.jpg" alt="" /></p>

<ol>
  <li>Sneaker District</li>
</ol>

<p><img src="http://www.script-tutorials.com/demos/365/img10.jpg" alt="" /></p>

<p>总结：</p>

<p>今天主要是收集了一些比较有趣的网站主题，感谢你的欣赏。如果你觉得这篇文章不错的话请你使用下面的社交平台将其分享给你的好友吧！</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[制作旋转CSS3下拉菜单（whirling CSS3 dropdown menu）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/11/04/whirling-css3-dropdown-menu/"/>
    <updated>2013-11-04T14:39:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/11/04/whirling-css3-dropdown-menu</id>
    <content type="html"><![CDATA[<p><img src="http://www.script-tutorials.com/demos/364/thumb.png" alt="" /></p>

<p>原文地址：<a href="http://www.script-tutorials.com/whirling-dropdown-menu/">http://www.script-tutorials.com/whirling-dropdown-menu/</a></p>

<p>译者：<a href="http://xiebaochun.github.io/">微个日光日</a></p>

<!--more-->

<p>很多下拉菜单都可以通过css3的选择器轻松实现。只要稍微激发一下你的创作灵感，你就可以做出一个真实而独特的设计。在今天的教程中，我们将创建一个特别的css3下拉菜单，当鼠标移动到父级菜单项时将会呈现新的下拉特效，子菜单项将会以旋转的方式出现。只要一步一步地跟着本教程就能创建这个菜单。</p>

<h3 id="section">预览：</h3>

<p><img src="http://www.script-tutorials.com/demos/364/menu.png" alt="" /></p>

<p><a href="http://www.script-tutorials.com/demos/364/index.html">在线演示</a></p>

<p><a href="http://www.script-tutorials.com/demos/364/source.zip">下载DEMO</a></p>

<h3 id="html">步骤 1.HTML</h3>

<p>首先需要为css菜单建一个HTML结构。和大部分下拉菜单类似，这是一个UL-LI结构的下拉菜单。下面是此菜单的HTML代码。</p>

<p>index.html</p>

<pre><code>&lt;ul class="menu"&gt;
&lt;li&gt;&lt;a href="#"&gt;Home&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#s1"&gt;Menu 1&lt;/a&gt;
    &lt;ul class="submenu"&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu a&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu b&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu c&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu d&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu e&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu f&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu g&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu h&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/li&gt;
&lt;li class="active"&gt;&lt;a href="#s2"&gt;Menu 2&lt;/a&gt;
    &lt;ul class="submenu"&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu a&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu b&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu c&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu d&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu e&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu f&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu g&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu h&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#"&gt;Menu 3&lt;/a&gt;
    &lt;ul class="submenu"&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu a&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu b&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu c&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu d&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu e&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu f&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu g&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Submenu h&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#"&gt;Menu 4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.script-tutorials.com/whirling-dropdown-menu/"&gt;Back to tutorial&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<h3 id="css">步骤 2.CSS</h3>

<p>css/main.css</p>

<pre><code>.menu, .menu ul {
list-style: none;
padding: 0;
margin: 0;
}
.menu {
height: 58px;
}
.menu li {
background: -moz-linear-gradient(#292929, #252525);
background: -ms-linear-gradient(#292929, #252525);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #292929), color-stop(100%, #252525));
background: -webkit-linear-gradient(#292929, #252525);
background: -o-linear-gradient(#292929, #252525);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#292929', endColorstr='#252525');
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#292929', endColorstr='#252525')";
background: linear-gradient(#292929, #252525);

border-bottom: 2px solid #181818;
border-top: 2px solid #303030;
min-width: 160px;
}
.menu &gt; li {
display: block;
float: left;
position: relative;
}
.menu &gt; li:first-child {
border-radius: 5px 0 0;
}
.menu a {
border-left: 3px solid rgba(0, 0, 0, 0);
color: #808080;
display: block;
font-family: 'Lucida Console';
font-size: 18px;
line-height: 54px;
padding: 0 25px;
text-decoration: none;
text-transform: uppercase;
}
</code></pre>

<p>当鼠标移动到某个菜单项上时，将其高亮。</p>

<pre><code>.menu li:hover {
background-color: #1c1c1c;
background: -moz-linear-gradient(#1c1c1c, #1b1b1b);
background: -ms-linear-gradient(#1c1c1c, #1b1b1b);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #1c1c1c), color-stop(100%, #1b1b1b));
background: -webkit-linear-gradient(#1c1c1c, #1b1b1b);
background: -o-linear-gradient(#1c1c1c, #1b1b1b);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#1c1c1c', endColorstr='#1b1b1b');
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#1c1c1c', endColorstr='#1b1b1b')";
background: linear-gradient(#1c1c1c, #1b1b1b);

border-bottom: 2px solid #222222;
border-top: 2px solid #1B1B1B;
}
.menu li:hover &gt; a {
border-radius: 5px 0 0 0;
border-left: 3px solid #C4302B;
color: #C4302B;
}
</code></pre>

<p>子菜单项默认是隐藏的，并且它的元素被选择了90度。当鼠标悬停在父级菜单项时，子菜单将显示它的所有菜单项。</p>

<pre><code>/* submenu styles */
.submenu {
left: 0;
max-height: 0;
position: absolute;
top: 100%;
z-index: 0;

-webkit-perspective: 400px;
-moz-perspective: 400px;
-ms-perspective: 400px;
-o-perspective: 400px;
perspective: 400px;
}
.submenu li {
opacity: 0;

-webkit-transform: rotateY(90deg);
-moz-transform: rotateY(90deg);
-ms-transform: rotateY(90deg);
-o-transform: rotateY(90deg);
transform: rotateY(90deg);

-webkit-transition: opacity .4s, -webkit-transform .5s;
-moz-transition: opacity .4s, -moz-transform .5s;
-ms-transition: opacity .4s, -ms-transform .5s;
-o-transition: opacity .4s, -o-transform .5s;
transition: opacity .4s, transform .5s;
}
.menu .submenu li:hover a {
border-left: 3px solid #454545;
border-radius: 0;
color: #ffffff;
}
.menu &gt; li:hover .submenu, .menu &gt; li:focus .submenu {
max-height: 2000px;
z-index: 10;
}
.menu &gt; li:hover .submenu li, .menu &gt; li:focus .submenu li {
opacity: 1;

-webkit-transform: none;
-moz-transform: none;
-ms-transform: none;
-o-transform: none;
transform: none;
}
</code></pre>

<p>最后，为了使其更特别一点，给每个子菜单项添加一些延迟，这样他们就会依次显示出来。</p>

<pre><code>/* CSS3 delays for transition effects */
.menu li:hover .submenu li:nth-child(1) {
-webkit-transition-delay: 0s;
-moz-transition-delay: 0s;
-ms-transition-delay: 0s;
-o-transition-delay: 0s;
transition-delay: 0s;
}
.menu li:hover .submenu li:nth-child(2) {
-webkit-transition-delay: 50ms;
-moz-transition-delay: 50ms;
-ms-transition-delay: 50ms;
-o-transition-delay: 50ms;
transition-delay: 50ms;
}
.menu li:hover .submenu li:nth-child(3) {
-webkit-transition-delay: 100ms;
-moz-transition-delay: 100ms;
-ms-transition-delay: 100ms;
-o-transition-delay: 100ms;
transition-delay: 100ms;
}
.menu li:hover .submenu li:nth-child(4) {
-webkit-transition-delay: 150ms;
-moz-transition-delay: 150ms;
-ms-transition-delay: 150ms;
-o-transition-delay: 150ms;
transition-delay: 150ms;
}
.menu li:hover .submenu li:nth-child(5) {
-webkit-transition-delay: 200ms;
-moz-transition-delay: 200ms;
-ms-transition-delay: 200ms;
-o-transition-delay: 200ms;
transition-delay: 200ms;
}
.menu li:hover .submenu li:nth-child(6) {
-webkit-transition-delay: 250ms;
-moz-transition-delay: 250ms;
-ms-transition-delay: 250ms;
-o-transition-delay: 250ms;
transition-delay: 250ms;
}
.menu li:hover .submenu li:nth-child(7) {
-webkit-transition-delay: 300ms;
-moz-transition-delay: 300ms;
-ms-transition-delay: 300ms;
-o-transition-delay: 300ms;
transition-delay: 300ms;
}
.menu li:hover .submenu li:nth-child(8) {
-webkit-transition-delay: 350ms;
-moz-transition-delay: 350ms;
-ms-transition-delay: 350ms;
-o-transition-delay: 350ms;
transition-delay: 350ms;
}

.submenu li:nth-child(1) {
-webkit-transition-delay: 350ms;
-moz-transition-delay: 350ms;
-ms-transition-delay: 350ms;
-o-transition-delay: 350ms;
transition-delay: 350ms;
}
.submenu li:nth-child(2) {
-webkit-transition-delay: 300ms;
-moz-transition-delay: 300ms;
-ms-transition-delay: 300ms;
-o-transition-delay: 300ms;
transition-delay: 300ms;
}
.submenu li:nth-child(3) {
-webkit-transition-delay: 250ms;
-moz-transition-delay: 250ms;
-ms-transition-delay: 250ms;
-o-transition-delay: 250ms;
transition-delay: 250ms;
}
.submenu li:nth-child(4) {
-webkit-transition-delay: 200ms;
-moz-transition-delay: 200ms;
-ms-transition-delay: 200ms;
-o-transition-delay: 200ms;
transition-delay: 200ms;
}
.submenu li:nth-child(5) {
-webkit-transition-delay: 150ms;
-moz-transition-delay: 150ms;
-ms-transition-delay: 150ms;
-o-transition-delay: 150ms;
transition-delay: 150ms;
}
.submenu li:nth-child(6) {
-webkit-transition-delay: 100ms;
-moz-transition-delay: 100ms;
-ms-transition-delay: 100ms;
-o-transition-delay: 100ms;
transition-delay: 100ms;
}
.submenu li:nth-child(7) {
-webkit-transition-delay: 50ms;
-moz-transition-delay: 50ms;
-ms-transition-delay: 50ms;
-o-transition-delay: 50ms;
transition-delay: 50ms;
}
.submenu li:nth-child(8) {
-webkit-transition-delay: 0s;
-moz-transition-delay: 0s;
-ms-transition-delay: 0s;
-o-transition-delay: 0s;
transition-delay: 0s;
}
</code></pre>

<p><a href="http://www.script-tutorials.com/demos/364/index.html">在线演示</a></p>

<p><a href="http://www.script-tutorials.com/demos/364/source.zip">下载DEMO</a></p>

<h3 id="section-1">总结:</h3>

<p>我们只是随意地制作了一个css3下拉菜单。谢谢你耐心看完本教程，如果你喜欢今天的主题，请使用下面的社交平台将其分享给你的朋友吧！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[（学习网址大全）learning sites collection]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/30/learning-sites-collection/"/>
    <updated>2013-10-30T16:54:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/30/learning-sites-collection</id>
    <content type="html"><![CDATA[<p>更新by：me</p>

<!--more-->

<p><a href="http://www.homeandlearn.co.uk/php/php.html">free PHP TUtorials</a></p>

<p><a href="http://www.script-tutorials.com/">Script Tutorials</a></p>

<p><a href="http://blogs.msdn.com/b/davrous/">sharing about HTML5, Windows 8 &amp; Gaming</a></p>

<p><a href="http://www.w3.org/">http://www.w3.org/</a></p>

<p><a href="http://www.createjs.com/#!/CreateJS">http://www.createjs.com/#!/CreateJS</a></p>

<p><a href="http://www.guokr.com/">果壳科技有意思</a></p>

<p><a href="http://www.raywenderlich.com/">Tutorials for iPhone / iOS Developers and Gamers</a></p>

<p><a href="https://developer.apple.com/">apple developer center</a></p>

<p><a href="http://blog.csdn.net/wlqf366">PHP实战（微凉的CSDN Blog）</a></p>

<p><a href="http://blog.csdn.net/poem_qianmo/">C++游戏编程（浅墨的csdn Blog)</a></p>

<p><a href="http://www.directxtutorial.com/">Directx教程（外文网站）</a></p>

<p><a href="http://www.v2ex.com/">V2EX 是一个关于分享和探索的地方</a></p>

<p><a href="http://jsfiddle.net/simurai/CGmCe/">hubsample（html+css+javascript在线工具）</a></p>

<p>http://www.hotscripts.com/category/scripts/html5/html5-applications/html5-video-players/</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[制作HTML5音频播放器（HTML5 Audio Player With playlist）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/30/html5-audio-player-with-playlist/"/>
    <updated>2013-10-30T11:02:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/30/html5-audio-player-with-playlist</id>
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/xiebaochun/juerryimages/master/html5/audioplayer/bg.jpg" alt="" /></p>

<p>也许对于很多人来说这是人生中第一次制作音频播放器。通常你会选择一个可用的播放器，一般是flash播放器。但是你也许已经发现，flash播放器在移动设备（如iPhone/Android)上不能很好的工作。今天，我将教你如何使用HTML5技术制作你自己的音频播放器。这个播放器包含了以下元素：title(标题），author(作家），cover（封面），基本的控制（播放/暂停，前进/后退），两个滑动条（jQuery UI sliders）:音量滑动条和一个歌曲跟踪器(song tracker)，还有一个歌曲列表。
<!--more--></p>

<h3 id="section">预览</h3>

<p><a href="http://xiebaochun.github.io/mylab/HTML5/AudioPlayer/">在线演示</a></p>

<p>我相信你应该知道如何使用<audio>这个标准的标签来创建一个简单的音频播放器。在本教程里，我们会使用一个特殊的标签，我将使用所有所需的控制元素来创建我们的播放器。我们将会使用javascript写好的一个音频元素的事件处理来控制这个播放器。</audio></p>

<h3 id="html">步骤1，HTML</h3>

<p>像往常一样，我们需要在head部分包含几个文件。</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="author" content="Script Tutorials" /&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /&gt;
&lt;title&gt;HTML5 Audio player with playlist | Script Tutorials&lt;/title&gt;

&lt;!-- add styles and scripts --&gt;
&lt;link href="css/styles.css" rel="stylesheet" type="text/css" /&gt;
&lt;script type="text/javascript" src="js/jquery-1.7.2.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/main.js"&gt;&lt;/script&gt;
&lt;/head&gt;
</code></pre>

<p>现在看一下播放器的标签。</p>

<pre><code>&lt;div class="player"&gt;
&lt;div class="pl"&gt;&lt;/div&gt;
&lt;div class="title"&gt;&lt;/div&gt;
&lt;div class="artist"&gt;&lt;/div&gt;
&lt;div class="cover"&gt;&lt;/div&gt;
&lt;div class="controls"&gt;
&lt;div class="play"&gt;&lt;/div&gt;
&lt;div class="pause"&gt;&lt;/div&gt;
&lt;div class="rew"&gt;&lt;/div&gt;
&lt;div class="fwd"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="volume"&gt;&lt;/div&gt;
&lt;div class="tracker"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul class="playlist hidden"&gt;
&lt;li audiourl="01.mp3" cover="cover1.jpg" artist="Artist 1"&gt;01.mp3&lt;/li&gt;
&lt;li audiourl="02.mp3" cover="cover2.jpg" artist="Artist 2"&gt;02.mp3&lt;/li&gt;
&lt;li audiourl="03.mp3" cover="cover3.jpg" artist="Artist 3"&gt;03.mp3&lt;/li&gt;
&lt;li audiourl="04.mp3" cover="cover4.jpg" artist="Artist 4"&gt;04.mp3&lt;/li&gt;
&lt;li audiourl="05.mp3" cover="cover5.jpg" artist="Artist 5"&gt;05.mp3&lt;/li&gt;
&lt;li audiourl="06.mp3" cover="cover6.jpg" artist="Artist 6"&gt;06.mp3&lt;/li&gt;
&lt;li audiourl="07.mp3" cover="cover7.jpg" artist="Artist 7"&gt;07.mp3&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<h3 id="css">步骤2.CSS</h3>

<p>现在可以将赤裸裸的HTML5文件变成漂亮的播放器了，为此，我们需要为每个元素定义样式。</p>

<p>css/styles.css</p>

<pre><code>.example {
margin: 50px auto 0;
width: 400px;
}
.player {
background: transparent url("../images/spr.png") no-repeat scroll center top;
height: 162px;
position: relative;
width: 326px;
z-index: 2;
}
.title, .artist {
font-family: verdana;
left: 167px;
position: absolute;

-moz-user-select: none;
-webkit-user-select: none;
-ms-user-select: none;
}
.title {
color: #FFFFFF;
font-size: 14px;
font-weight: bold;
top: 23px;
}
.artist {
color: #EEEEEE;
font-size: 12px;
top: 40px;
}
.pl {
background: transparent url("../images/spr.png") no-repeat scroll -274px -175px;
cursor: pointer;
height: 34px;
left: 270px;
position: absolute;
top: 20px;
width: 32px;
}
.pl:hover {
top: 21px;
}
.cover {
background: transparent url(../data/cover1.jpg) no-repeat scroll center top;
border-radius: 5px 5px 5px 5px;
height: 94px;
left: 20px;
position: absolute;
top: 20px;
width: 94px;
}
.controls {
cursor: pointer;
height: 23px;
left: 167px;
position: absolute;
top: 65px;
width: 138px;
}
.controls .play, .controls .pause, .controls .rew, .controls .fwd {
background: transparent url("../images/spr.png") no-repeat scroll 0 0;
float: left;
height: 100%;
width: 33%;
}
.controls .play {
background-position: -8px -171px;
}
.controls .pause {
background-position: -8px -198px;
display: none;
}
.controls .rew {
background-position: -54px -171px;
}
.controls .fwd {
background-position: -100px -171px;
}
.controls .play:hover {
background-position: -8px -170px;
}
.controls .pause:hover {
background-position: -8px -197px;
}
.controls .rew:hover {
background-position: -54px -170px;
}
.controls .fwd:hover {
background-position: -100px -170px;
}
.hidden {
display: none;
}
.controls .visible {
display: block;
}
.volume {
height: 11px;
left: 186px;
position: absolute;
top: 96px;
width: 112px;
}
.tracker {
height: 15px;
left: 20px;
position: absolute;
top: 126px;
width: 285px;
}
.ui-slider-range {
background: transparent url("../images/spr.png") no-repeat scroll 5px -222px;
height: 100%;
position: absolute;
top: 0;
}
.ui-slider-handle {
cursor: pointer;
height: 10px;
margin-left: -5px;
position: absolute;
top: 2px;
width: 10px;
z-index: 2;
}
.volume .ui-slider-handle {
background: url("../images/spr.png") no-repeat scroll -201px -188px rgba(0, 0, 0, 0);
height: 13px;
width: 13px;
}
.playlist {
background-color: #333333;
border-radius: 5px 5px 5px 5px;
list-style-type: none;
margin: -10px 0 0 2px;
padding-bottom: 10px;
padding-top: 15px;
position: relative;
width: 326px;
z-index: 1;
}
.playlist li {
color: #EEEEEE;
cursor: pointer;
margin: 0 0 5px 15px;
}
.playlist li.active {
font-weight: bold;
}
</code></pre>

<h3 id="javascript">步骤3.JavaScript</h3>

<p>现在这个漂亮的播放器还不能做任何事情-不可用的状态。为了让其能正常工作，你需要为其添加一些事件和方法。首先，我们需要初始化几个变量。</p>

<p>js/main.js</p>

<pre><code>// inner variables
var song;
var tracker = $('.tracker');
var volume = $('.volume');

// initialization - first element in playlist
initAudio($('.playlist li:first-child'));

// set volume
song.volume = 0.8;

// initialize the volume slider
volume.slider({
range: 'min',
min: 1,
max: 100,
value: 80,
start: function(event,ui) {},
slide: function(event, ui) {
song.volume = ui.value / 100;
},
stop: function(event,ui) {},
});

// empty tracker slider
tracker.slider({
range: 'min',
min: 0, max: 10,
start: function(event,ui) {},
slide: function(event, ui) {
song.currentTime = ui.value;
},
stop: function(event,ui) {}
});
</code></pre>

<p>然后为控制按钮添加事件处理。play和Pause按钮。</p>

<pre><code>// play click
$('.play').click(function (e) {
e.preventDefault();

playAudio();
});

// pause click
$('.pause').click(function (e) {
e.preventDefault();

stopAudio();
});
</code></pre>

<p>为了切换列表的歌曲，我们需要停止当前播放的歌曲，选择列表里的下一首（或者上一首），并重新初始化我们的Audio元素。Forward/Rewind按钮。</p>

<pre><code>// forward click
$('.fwd').click(function (e) {
e.preventDefault();

stopAudio();

var next = $('.playlist li.active').next();
if (next.length == 0) {
next = $('.playlist li:first-child');
}
initAudio(next);
});

// rewind click
$('.rew').click(function (e) {
e.preventDefault();

stopAudio();

var prev = $('.playlist li.active').prev();
if (prev.length == 0) {
prev = $('.playlist li:last-child');
}
initAudio(prev);
});
</code></pre>

<p>最后，就是一些处理歌曲列表的函数。</p>

<pre><code>// show playlist
$('.pl').click(function (e) {
e.preventDefault();

$('.playlist').fadeIn(300);
});

// playlist elements - click
$('.playlist li').click(function () {
stopAudio();
initAudio($(this));
});
</code></pre>

<h3 id="images">步骤4.Images</h3>

<p>所有的用到的图片（images)都打包到一个叫nav.png的sprite（图片）文件里。</p>

<p><img src="http://www.script-tutorials.com/demos/363/images/spr.png" alt="" /></p>

<p><a href="http://xiebaochun.github.io/mylab/HTML5/AudioPlayer/">在线演示</a></p>

<h3 id="section-1">结语：</h3>

<p>这就是今天所有的内容，我们只是制作了一个有趣的音频播放器。感谢您耐心看完本教程，如果你喜欢此文章的话，请使用下面提供的社交平台分享给你所有的朋友吧！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Unifying touch and mouse:how Pointer Envents will make cross-browser touch support easy]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/22/unifying-touch-and-mouse-how-pointer-envents-will-make-cross-browser-touch-support-easy/"/>
    <updated>2013-10-22T17:13:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/22/unifying-touch-and-mouse-how-pointer-envents-will-make-cross-browser-touch-support-easy</id>
    <content type="html"><![CDATA[<p><img src="http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-10-46-metablogapi/4300.clip_5F00_image001_5F00_thumb_5F00_4E7D303E.png" alt="" /></p>

<p>原文地址：<a href="http://blogs.msdn.com/b/davrous/archive/2013/10/21/handling-touch-in-your-html5-apps-thanks-to-the-pointer-events-of-ie10-and-windows-8.aspx">http://blogs.msdn.com/b/davrous/archive/2013/10/21/handling-touch-in-your-html5-apps-thanks-to-the-pointer-events-of-ie10-and-windows-8.aspx</a></p>

<p>我经常听到这样的问题”手机和平板上这么多触控功能，我要从哪开始着手研究”,还有“开发一个触控输入最简单的方法是什么？”答案是：“很复杂。”</p>

<!--more-->
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[获取Canvas里的鼠标位置，不使用jquery]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/17/getting-cursor-position-in-a-canvas-without-jquery/"/>
    <updated>2013-10-17T14:37:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/17/getting-cursor-position-in-a-canvas-without-jquery</id>
    <content type="html"><![CDATA[<p><img src="data:image/jpeg;base64,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" alt="" /></p>

<p>在写canvas游戏时，为了获取鼠标在canvas里的位置信息，这里有两种方法。
<!--more--></p>

<p>第一种：</p>

<pre><code>function getMousePos(canvas, evt) {
var rect = canvas.getBoundingClientRect(), root = document.documentElement;

// return relative mouse position
var mouseX = evt.clientX - rect.left - root.scrollLeft;
var mouseY = evt.clientY - rect.top - root.scrollTop;
return {
  x: mouseX,
  y: mouseY
};
  }

  window.onload = function() {
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');

canvas.addEventListener('mousemove', function(evt) {
  var mousePos = getMousePos(canvas, evt);
  var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
  alert(message);
}, false);
  };
</code></pre>

<p>这种方法在页面滚动的情况下也适用。</p>

<p>第二种：</p>

<pre><code>function getMousePos(canvas, event)
{
var mouseX = event.pageX - canvas.offsetLeft;
var mouseY = event.pageY - canvas.offsetTop;
return {
x: mouseX,
y: mouseY };
}
</code></pre>

<p>这种方法相对比较简单，但是不适用与页面滚动的情况，所以使用这种方法应该禁止页面滚动。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JSB内存管理（Memory Management of JSB）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/16/memory-management-of-jsb/"/>
    <updated>2013-10-16T15:23:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/16/memory-management-of-jsb</id>
    <content type="html"><![CDATA[<p>原文地址：<a href="http://www.cocos2d-x.org/wiki/Memory_Management_of_JSB">http://www.cocos2d-x.org/wiki/Memory_Management_of_JSB</a></p>

<p>注：因译者水平有限，如有错误，请批评指正。</p>

<h2 id="jsb">JSB的内存管理</h2>

<p>基于Cocos2d-x 2.15,但同样适用于Cocos2d-x 3.0。</p>

<h3 id="jsb-1">JSB对象的生命周期</h3>

<p>总所周知，javascript有自己的内存管理机制，即垃圾回收。Cocos2d-x模拟垃圾回收系统来管理Cocos对象。但这里有一个问题，就是将Cocos2d-x对象绑定到javascript对象时由谁负责内存管理。
<!--more-->
先看一个案例。</p>

<h3 id="xxxcreate">通过XXX.create()来分配对象内存</h3>

<p>下面的代码分配了一个全局变量。</p>

<pre><code>gnode=cc.Node.create();
</code></pre>

<p>gnode并没有通过addChild()添加到其它cc.Node中。</p>

<p>在菜单项的回调函数中添加如下代码：</p>

<pre><code>//meuItem callback
onButton:function(sender){
sender.addChild(gnode);
}
</code></pre>

<p>当点击此按钮，你将会看到如下错误信息：</p>

<pre><code>Cocos2d: jsb: ERROR: File /Users/u0u0/Documents/project/SK_parkour/scripting/javascript/bindings/generated/jsb_cocos2dx_auto.cpp: Line: 3010, Function: js_cocos2dx_CCNode_addChild
Cocos2d: Invalid Native Object
</code></pre>

<p>发生了什么！“Invalid Native Object”是什么意思？</p>

<p>在javascript中gnode是一个全局变量，意味着它不能被回收。</p>

<p>但是gnode里的CCNode会被Cocos2d-x回收。</p>

<p>为了弄清楚这个问题，你需要了解一下spidermonkey并深入研究javascript的绑定代码。</p>

<p>cc.Node.create()的内部实现</p>

<p>详细的实现代码如下：</p>

<pre><code>static JSFunctionSpec st_funcs[] = {
JS_FN("create", js_cocos2dx_CCNode_create, 0, JSPROP_PERMANENT | JSPROP_ENUMERATE),
JS_FS_END
};

jsb_CCNode_prototype = JS_InitClass(
cx, global,
NULL, // parent proto
jsb_CCNode_class,
js_cocos2dx_CCNode_constructor, 0, // constructor
properties,
funcs,
NULL, // no static properties
st_funcs);
</code></pre>

<p>cc.Node.create()被对应的C函数是js_cocos2dx_CCNode_create()，如下：</p>

<pre><code>JSBool js_cocos2dx_CCNode_create(JSContext *cx, uint32_t argc, jsval *vp)
{
if (argc == 0) {
cocos2d::CCNode* ret = cocos2d::CCNode::create();
jsval jsret;
do {
if (ret) {
js_proxy_t *proxy = js_get_or_create_proxy&lt;cocos2d::CCNode&gt;(cx, ret);
jsret = OBJECT_TO_JSVAL(proxy-&gt;obj);
} else {
jsret = JSVAL_NULL;
}
} while (0);
JS_SET_RVAL(cx, vp, jsret);
return JS_TRUE;
}
JS_ReportError(cx, "wrong number of arguments");
return JS_FALSE;
}
</code></pre>

<p>通过cocos2d:CCNode::create()成功分配的对象将会被封装成js_get_or_create_proxy()创建的一个新对象js_proxy_t。</p>

<p>在js_get_or_create_proxy()函数里，只要关注下面这行代码：</p>

<pre><code>JS_AddObjectRoot(cx, &amp;proxy-&gt;obj);
</code></pre>

<p>这段代码将一个JSObject添加到垃圾回收器的根集合中的spidermonkey api。proxy-&gt;obj是对应javascript里的一个JSObject。</p>

<p>所以通过cc.Node.create()分配的对象将会一直保留在内存中，直到调用JS_RemoveObjectRoot()。</p>

<p>但是cocos2d::CCNode::create()是一个自动释放对象，它会在下一个游戏画面被Cocos2d-x回收。</p>

<p>CCobject的析构函数将会被调用，请注意下面的代码：</p>

<pre><code>// if the object is referenced by Lua engine, remove it
if (m_nLuaID)
{
CCScriptEngineManager::sharedManager()-&gt;getScriptEngine()-&gt;removeScriptObjectByCCObject(this);
}
else
{
CCScriptEngineProtocol* pEngine = CCScriptEngineManager::sharedManager()-&gt;getScriptEngine();
if (pEngine != NULL &amp;&amp; pEngine-&gt;getScriptType() == kScriptTypeJavascript)
{
pEngine-&gt;removeScriptObjectByCCObject(this);
}
}
</code></pre>

<p>pEngine-&gt;removeScriptObjectByCCObject做了一件神奇的事情。</p>

<pre><code>void ScriptingCore::removeScriptObjectByCCObject(CCObject* pObj)
{
js_proxy_t* nproxy;
js_proxy_t* jsproxy;
void *ptr = (void*)pObj;
nproxy = jsb_get_native_proxy(ptr);
if (nproxy) {
JSContext *cx = ScriptingCore::getInstance()-&gt;getGlobalContext();
jsproxy = jsb_get_js_proxy(nproxy-&gt;obj);
JS_RemoveObjectRoot(cx, &amp;jsproxy-&gt;obj);
jsb_remove_proxy(nproxy, jsproxy);
}
}
</code></pre>

<p>JS_RemoveObjectRoot函数将JSobject从javascript根集合中移除。 jsb_remove_proxy将proxy(委托）从hash表中移除。</p>

<p>现在我们可以解释本文开始提出的问题了。</p>

<h3 id="cocos2d-x">Cocos2d-x的垃圾回收系统负责内存管理</h3>

<p>回到gnode,它是一个全局变量。CCObject的析构函数JS_RemoveObjectRoot的作用只是平衡JS_AddObjectRoot的创建。Spidermonkey将不会回收这个全局变量，但是gnode的本地对象将会被释放。访问gnode的本地对象将会产生之前看到的那个错误。</p>

<h3 id="new">通过new分配对象</h3>

<p>思考一下下面的代码:</p>

<pre><code>gnode=new cc.Node;
</code></pre>

<p>为了找到正确答案，同样需要深入研究JSB代码。</p>

<p>如之前提到的，cc.Node的构造函数是js_cocos2dx_CCNode_constructor()。</p>

<p>请注意下面的代码：</p>

<pre><code>if (argc == 0) {
cocos2d::CCNode* cobj = new cocos2d::CCNode();
cocos2d::CCObject *_ccobj = dynamic_cast&lt;cocos2d::CCObject *&gt;(cobj);
if (_ccobj) {
_ccobj-&gt;autorelease();
}
</code></pre>

<p>本地对象被压入到Cocos2d-x的自动释放池中。所以new和create()是一样的。</p>

<h3 id="retainrelease">关于retain()和release()</h3>

<p>有两个函数可以用于手动控制对象的生命周期。如果你想避免之前例子中产生的错误。</p>

<p>你可以有以下两个选择：</p>

<p>1.将gnode添加到其它的CCNode中，addChild()将gnode保留在内部。</p>

<p>2.在create()之后立即调用gnode.retain()。</p>

<p>在第二种情况下，你需要在合适的时候调用gnode.release()以防止内存泄漏。下一节将会介绍它。</p>

<h3 id="ctoronexit">ctor()和onExit()</h3>

<p>Cocos2d-x JSB使用<a href="http://api.viglink.com/api/click?format=go&amp;key=9b4efad421c8b103b2c94b796db973b0&amp;loc=http%3A%2F%2Fwww.cocos2d-x.org%2Fwiki%2FMemory_Management_of_JSB&amp;subId=d654e26afef9085d79aba37dfe97be28&amp;v=1&amp;libId=0b3cce4b-8d39-40a9-a3f9-62d2885b09d0&amp;out=http%3A%2F%2Fejohn.org%2Fblog%2Fsimple-javascript-inheritance%2F&amp;title=Cocos2d-x%20%7C%20Memory%20Management%20of%20JSB&amp;txt=Simple%20JavaScript%20Inheritance%20By%20John%20Resig&amp;jsonp=vglnk_jsonp_138191400851911">Simple JavaScript Inheritance By John Resig</a>。但是构造函数的名字不一样。</p>

<p>在JSB中，ctor是构造函数。对应的onExit则扮演的是析构函数，它会在CCNode释放之前被调用。</p>

<p>下面的例子演示了如何手动控制JSB对象的生命周期。</p>

<pre><code>var container = cc.Node.extend({
ctor:function () {
this._super();
this.gnode = cc.Node.create();
this.gnode.retain();
},
onExit:function() {
this.gnode.release();
this._super();
},
});
</code></pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cocos2D-X教程1：制作一个打地鼠游戏（Cocos2D-X Tutorial:Making a Universal App:Part 1）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/16/cocos2d-x-tutorial-making-a-universal-app-part-1/"/>
    <updated>2013-10-16T09:00:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/16/cocos2d-x-tutorial-making-a-universal-app-part-1</id>
    <content type="html"><![CDATA[<p><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2011/01/WhackAMole1.jpg" alt="" /></p>

<p>击打这个地鼠！</p>

<p>原文地址：<a href="http://www.raywenderlich.com/48180/cocos2d-x-tutorial-making-a-universal-app-part-1">http://www.raywenderlich.com/48180/cocos2d-x-tutorial-making-a-universal-app-part-1</a></p>

<p>本教程介绍的是如何使用Cocos2D-iPhone创建一个打地鼠游戏，但是为什么要费这么大力气创建一个Cocos2D-X版本的呢？我认为有以下几个原因：
<!--more--></p>

<p>1.你可以通过本教程重新熟悉一下如何使用Cocos2D-X框架创建一个完整的游戏。</p>

<p>2.这是一个很好的机会去学习如何制作一个支持多分辨率和纵宽比的游戏。</p>

<p>3.Cocos2D-X是一个非常火的游戏引擎（特别是在中国），它是为多平台游戏而设计的（不像Cocos2D-iPhone或者Android,它是iOS特有的）。所以在本教程介绍Cocos2D-X是很有必要的。</p>

<p>本教程是以其他Cocos2D-X教程为基础的：</p>

<p><a href="http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started">Cocos2D-X for iOS and Android:Getting Started</a></p>

<p><a href="http://www.raywenderlich.com/33752/cocos2d-x-tutorial-for-ios-and-android-space-game">Cocos2d-X for ios and Android: Space Game</a></p>

<p><a href="http://www.raywenderlich.com/39113/cocos2d-x-tile-map-tutorial-part-1">Cocos2D-X Tile Map Tutoral:Part1</a></p>

<p><a href="http://www.raywenderlich.com/40544/cocos2d-x-tile-map-tutorial-part-2">Cocos2D-X Tile Map Tutoral:Part2</a></p>

<p>如果你还没看过这些Cocos2D-X教程（或者相关知识），我建议你先学习一下。</p>

<p>本系列教程分为两个部分。第一部分，我们将会创建游戏的基本内容-让小地鼠从地洞里弹出来。为了能让游戏在iPhone,iPad,和视网膜分辨率下达到很好的显示的效果，还有高效率，你将会花很多时间去思考如何管理素材和坐标。</p>

<h3 id="section">规划素材配置：概要</h3>

<p>为了能让游戏在iPhone,iPad和Android设备上工作正常，你首先要需要花一些时间来思考如何处理这些素材。</p>

<p>为了理解如何设置素材的合理尺寸，你首先需要学习一下两点知识：</p>

<ul>
  <li>
    <p>视网膜分辨率和Cocos2D-X</p>
  </li>
  <li>
    <p>iPhone,iPad和Android纵横比</p>
  </li>
</ul>

<p>现在开始吧！</p>

<h3 id="cocos2d-x">视网膜分辨率和Cocos2D-X</h3>

<p>好消息，Cocos2D-X的最新版本2.14完美解决了多分辨支持的问题，所以你可以较之前更容易制作了。</p>

<p>1.自从Cocos2D-X的2.04版本默认支持视网膜分辨率，你只要在你的app delegate里重新初始化你的资源就行了。</p>

<p>2.添加高分辨率的sprites到你的app，但是不要使用@2x或者-hd拓展名，你只要将所有高分辨率资源放在名为hd的文件夹中。当加载你的sprites时，根据屏幕的像素，Cocos2D-X将会从这个文件夹里加载hd图片到视网膜分辨。</p>

<p>3.现在在Cocos2D-X里你可以使用点代替像素布局你的sprites（精灵）。</p>

<p>当实际运用时，最简单的做法就是让你的美工制作所需的最高分辨率图片（比如视网膜分辨率的2X尺寸），并且你可以很容易将这些图片缩小到适合iPhone大小的尺寸。</p>

<p>你也许好奇为什么要弄成两个不同尺寸的图片-为什么不只加载大图并且通过代码来调整它的大小？要知道，对app来说将纹理图片加载到内存中是消耗内存的一种做法，所以如果你准备将app运行在不需要高分辨率的图片设备上时，加载设备对应的小图片可以节省很多内存空间。</p>

<p>但是不用担心-你不需要在photoshop上反复地缩小这些图片。TexturePacker提供了一个很棒的功能，它可以轻松地将这些图片进行缩放并提供所有分辨率的图片，并且在本教程中会使用到这个功能。</p>

<h3 id="iphoneipadandroid">iPhone,iPad和Android纵横比</h3>

<p>现在处理视网膜屏幕很简单，但是对于iPad和Android呢？</p>

<p>在本教程，如果你知道怎么样处理iOS设备，你只要把重点放在在iOS设备上，你也可以处理Android设备上的情况。</p>

<p>iPhone的分辨率有480<em>320,960</em>640和1136<em>640，即纵横比是1.5或者1.75。但是iPad的分辨率有768</em>1024和1536*2048，即纵横比为1.33。</p>

<p>这就是说，如果你有一张刚好可以填满iPad屏幕的图片，又想将其用于iPhone设备上，但不能吻合地平铺于iPhone屏幕上。也许你会讲这张图片缩放为适合iPhone宽度的大小（即乘0.9375）：将会得到720*960的尺寸，并且额外多出来的部分不被裁减掉！</p>

<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2011/01/Aspect-Ratio-Diff.jpg" alt="" /></p>

<p>这样会变得很麻烦，因为不仅背景图片的有问题，而且由于纵横比的关系让在设备上使用相同的坐标变得很困难。</p>

<p>这里有处理这个问题的几个策略，这是一些开发者经常用到的：</p>

<ul>
  <li>
    <p>如上图所示，在屏幕的中央放置iPhone视网膜屏幕尺寸（640*960）大小的“可玩区域”。这样在“可玩区域”周围会留下额外的空间-你可以用一张背景图片将其覆盖掉并让玩家不容易察觉到。这样你就可以轻松地在设备之间转换坐标了，并且可重复使用素材（高分辨率的资源用于iPad和视网膜屏，普通分辨率资源用于普通的iPhone或者普通的iPad上）。这也是本教程使用的方法。</p>
  </li>
  <li>
    <p>你可以在iPad的两侧各留42像素的空隙，使剩下的区域的从纵横比就和iPhone一样，这样里面的主区域分辨率就是684<em>1024.如果让你内容适应于684</em>1024大小的盒子里，那么你可以将这些图片缩小，并适用于所有的设备。</p>
  </li>
  <li>
    <p>你可以为iPhone,iPad和视网膜屏幕准备不同的图片和不同的坐标系。这样可以保持最大的灵活性，但是会增加资源大小并且在不同的设备上从新布局对象的位置。</p>
  </li>
</ul>

<h3 id="section-1">规划素材：总结</h3>

<p>基于上面的讨论，现在开始规划一下本教程。</p>

<ul>
  <li>
    <p>这些素材被限制在了一个960*640规格的可玩区域，在带有视网膜屏幕的iPhone上使用全屏设置，并置于iPad的屏幕中央。</p>
  </li>
  <li>
    <p>通过TexturePacker将这些素材缩小一半，用于普通iPhone设备。</p>
  </li>
  <li>
    <p>将大尺寸的素材放置于名为hd的文件夹，小尺寸的放于名为sd的文件夹。</p>
  </li>
  <li>
    <p>背景需要特别处理，因为它总是要铺满整个屏幕。背景图片将会做成1024*768的规格（iPad的规格）以至于能铺满整个屏幕。同样的背景图片也会用于iPhone设备应为图片完全可以铺满屏幕。一些背景会溢出屏幕，但但是这并不会对这种特殊背景造成影响。</p>
  </li>
  <li>
    <p>iPad版本的代码将会使用hd文件夹的图片，将坐标转到可玩区域内，并使用合适的纵横比，等。</p>
  </li>
</ul>

<p>请<a href="http://d1xzuxjlafny7l.cloudfront.net/downloads/WhackAMoleArt.zip">下载</a>本教程的素材图片，素材有<a href="http://www.vmwstudios.com/">lovely lady</a>制作。解压文件并看看是如何配置的：</p>

<ul>
  <li>
    <p>在foreground文件夹中，前景图片是1024*768尺寸（iPad的规格）。但是实际上被分为了两部分：下面和上面各一部分，他被分为两部分，这样你可将地鼠置于中间，这样地鼠就好像是从地里出来的那样。</p>
  </li>
  <li>
    <p>在background文件夹中，背景的纵横比是1.33（iPad的纵横比），但是其实际规格是512<em>384。这是因为背景上仅仅显示3个地鼠洞，所以没有必要费这么大力气加载1024</em>1024规格的纹理图片。加载一个小的纹理图片并将其放大。</p>
  </li>
  <li>
    <p>在sprites文件夹，所有的精灵的大小刚刚好适用于960*640规格的可玩区域。注意，这里有一个地鼠还有对应的两个动画（一个微笑表情和一个被打动作）。</p>
  </li>
</ul>

<h3 id="section-2">开始</h3>

<p>打开Xcode,选择FIle\New\Project…并使用iOS\cocos2d-x\cocos2d模板创建一个工程，然后点击Next按钮。将工程名命名为WhackAMole,将Device familiy设置为Universal,并保存工程。</p>

<p><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2013/08/figure1.jpg" alt="" /></p>

<p>使用使用Finder将刚刚下载并解压后的文件添加到WhackAMole工程目录中。它应该和Classes文件夹位于同一级目录中。</p>

<p><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2013/08/figure2.jpg" alt="" /></p>

<p>确保安装了TexturePacker,并在你的机器上能正常运行。如果你没有准备好，或者不知道如何做，请查看<a href="http://www.raywenderlich.com/2361/texture-packer-tutorial-how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-pixel-formats">此教程</a>。</p>

<p>现在你将要使用TexturePacker来创建工程所需的精灵表单。你讲通过TexturePacker的命令行工具和Xcode集成环境来完成此任务，所以不需要使用TexturePacker可视化工具。</p>

<p>现在选择Resources文件夹，按下Command+K,选择OSX\Other\Shell Script。并点击Next.将文件命名为PackerTextures.sh,并点击Create。</p>

<p>然后将下面的代码将PackerTexture,sh的内容覆盖掉：</p>

<pre><code>#!/bin/sh
TP="/usr/local/bin/TexturePacker"
if [ "${ACTION}" = "clean" ]
then
echo "cleaning..."
rm Resources/hd/background*
rm Resources/hd/foreground*
rm Resources/hd/sprites*
rm Resources/sd/background*
rm Resources/sd/foreground*
rm Resources/sd/sprites*
else
echo "building..."

${TP} --smart-update \
--format cocos2d \
--data Resources/hd/background.plist \
--sheet Resources/hd/background.pvr.ccz \
--dither-fs \
--opt RGB565 \
Art/background/*.png
${TP} --smart-update \
--format cocos2d \
--data Resources/sd/background.plist \
--sheet Resources/sd/background.pvr.ccz \
--dither-fs \
--scale 0.5 \
--opt RGB565 \
Art/background/*.png
${TP} --smart-update \
--format cocos2d \
--data Resources/hd/foreground.plist \
--sheet Resources/hd/foreground.pvr.ccz \
--dither-fs-alpha \
--opt RGBA4444 \
Art/foreground/*.png
${TP} --smart-update \
--format cocos2d \
--data Resources/sd/foreground.plist \
--sheet Resources/sd/foreground.pvr.ccz \
--dither-fs-alpha \
--scale 0.5 \
--opt RGBA4444 \
Art/foreground/*.png
${TP} --smart-update \
--format cocos2d \
--data Resources/hd/sprites.plist \
--sheet Resources/hd/sprites.pvr.ccz \
--dither-fs-alpha \
--opt RGBA4444 \
Art/sprites/*.png
${TP} --smart-update \
--format cocos2d \
--data Resources/sd/sprites.plist \
--sheet Resources/sd/sprites.pvr.ccz \
--dither-fs-alpha \
--scale 0.5 \
--opt RGBA4444 \
Art/sprites/*.png
fi
exit 0
</code></pre>

<p>然后将PackTevture移动到文件路径：</p>

<p><img src="http://cdn4.raywenderlich.com/wp-content/uploads/2013/08/figure3.jpg" alt="" /></p>

<p>不要忘了将PackTexture.sh的引用移动到工程中：</p>

<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/08/figure4.jpg" alt="" /></p>

<p>TexturePacker脚本将为背景图片，前景图片和精灵创建了精灵表单。并为他们准备了高质量和普通质量的图片。</p>

<p>既然每章图片的存放格式都是pvr.ccz,所以跟有效地利用了内存和硬盘空间。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[在SimpleMaps上赢取3个终身证书（win 3 lifetime licenses at simplemaps）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/15/win-3-lifetime-licenses-at-simplemaps/"/>
    <updated>2013-10-15T16:41:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/15/win-3-lifetime-licenses-at-simplemaps</id>
    <content type="html"><![CDATA[<p><img src="http://www.script-tutorials.com/demos/ga/simplemaps/simplemaps.png" alt="" /></p>

<p>SimpleMaps.com将对任何独立的HTML5 maps提供三个终身证书(价格：$79到￥199）。如果你在工程里要使用到地图，那么这将是你的福音。你可以通过编辑一个简单的文件来自定义地图。不需要任何HTML5,Flash，或者JavaScript的知识。一步一步参考文档让安装更加容易。而且它将使用与移动设备：HTML5地图在iphone,android,ipads和其他平板设备上都可以正常显示。此地图会自动检测移动设备并将导航调整为最佳布局。
<!--more-->
### 关于SimpleMaps ###</p>

<p><a href="http://simplemaps.com/">SimpleMaps</a>支持HTML5/JavaScript网站地图的交互。他们的Word和USA地图是他们最火的产品。这些地图很适合开发网站地图导航和可视化地理数据。SimpleMaps使用一个很直观的spreadsheet-based在线工具可以很简易快捷地进行自定义。此地图很灵活并且通过JavaScript API进行扩展。SimpleMaps在移动设备上的显示效果非常好并且完美支持低支持度的浏览器，如IE7和IE8。</p>

<h3 id="section">使用的例子：</h3>

<p><img src="http://www.script-tutorials.com/demos/ga/simplemaps/example1.png" alt="" /></p>

<h3 id="section-1">可视化国家区域</h3>

<p>此地图是一个理想的可视化全球数据的工具，你可能想可视化你公司的国家 级区域。他们的在线自定义工具可以让你在几分钟里将一个Excel文件转换成一个交互性中心或者热点地图。不需要任何技术知识。想学习如何创建上图所示的地图，请参考热点地图教程（heat map tutorial)。</p>

<p><img src="http://www.script-tutorials.com/demos/ga/simplemaps/example2.png" alt="" /></p>

<h3 id="html">HTML和图片提示描述</h3>

<p>此地图弹出的描述信息可接受HTML并且恨意使用css来编辑样式。这让地图变得很灵活、当用户的鼠标移动到某个区域时，你可以使其显示一个张关于此区域有关的信息图片。或者你可以使其显示显示每个国家的列表。首先通过定义一个空白地图，或者定义一个模板。</p>

<p><img src="http://www.script-tutorials.com/demos/ga/simplemaps/example3.png" alt="" /></p>

<h3 id="section-2">显示办公室或商店位置</h3>

<p>此地图让你很容易让用户找到附近的商店或者办公位置。当用户点击他们的省或者城市时，他们可以导航到你的网站的相关页面。使用在线编辑工具可以很容易自定义地图上的色彩和描述。请使用一个空白的地图或者自定义模板开始使用。</p>

<hr />

<h3 id="enter-to-win">Enter To Win(获取证书）</h3>
<p><a href="http://www.giveaway.ly/">http://www.giveaway.ly/</a></p>

<h3 id="section-3">注意：</h3>

<p>1.访问http://simplemapes.com/pricing,选择你需要获取的地图并在本文下面平回复你将如何在你的网站上使用它。请使用有效的名字和邮件地址来进行评论。</p>

<p>2.使用下面的平台分享giveaway，在文本的评论中提交你的分享地址。</p>

<p>获奖者将会在未来15天后公布(2013年，10月30日）</p>

<p>原文地址：<a href="http://www.script-tutorials.com/simplemaps-offer/">http://www.script-tutorials.com/simplemaps-offer/</a></p>

<p>请到原文地址进行操作！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[(web开发的编程习惯）coding conventions in web development]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/15/coding-conventions-in-web-development/"/>
    <updated>2013-10-15T10:30:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/15/coding-conventions-in-web-development</id>
    <content type="html"><![CDATA[<p><img src="http://www.script-tutorials.com/demos/362/thumb.png" alt="" /></p>

<p>今天我要讨论的是一些编程习惯。每个人编程时间长了都会遇到编写代码风格的统一问题。我觉得每个人都会遇到这样的问题，就是不同的工程可以使用不同的规则和风格来编写，并且有时会很遇到很多麻烦，以至于你想要一些统一的编写规范。换句话说，编程习惯就是某种特定语言推荐的编程风格，方法和实践。这些习惯一般包括注释，文件结构管理，缩进，声明，空格，命名习惯，编程习惯和原则等。我们建议你遵循这些规则，他将会帮助你提高代码的可读性和易维护性。
<!--more-->
提供的大部分例子是PHP语言，但是很容易运用于其他语言中。</p>

<h3 id="tabulationtab">1.Tabulation(Tab)</h3>

<p>首先，我先提出一个问题：什么情况下使用tab和空格？一般，indentation并不是所有语言必须的，是次要的。开发者最好是将结构转成人们易读的形式。特别的，indentation是让控制流结构比如循环，包含结构更加亲切熟悉。</p>

<p>我从来都没有真正理解Tabs和Spaces的争议。但是无论如何，我可以建议你使用space而不是Tab。以曾经有过这样的争议：当我们使用不同的软件查看代码时，tabs和space看起来不一样。仅仅是缩进两行代码，第一行使用tab,第二行使用4个空格。他将看起来和Nptepad++。但是用备份的版本和这个对比，你讲会注意到tab比4个空格还长（结果，我们得到一个很糟糕的格式化代码）。因此在调整你的工程时请尽量使用空格代替tab.这个习惯将会给你将来带来很大的帮助。</p>

<h3 id="class-names">2.类的名字（class names)</h3>

<p>为了避免类的命名重复，类名必须以一个前缀开头并且每个单词的首字母一大些开始。例如：</p>

<pre><code>class MyClassName{
 function MyClassName(){
   }
}
</code></pre>

<h3 id="variable-names">3.变量名字（variable names)</h3>

<p>因为严格的数据编写在大多数的web语言中的遗失（虽然还可以使用），为了方便，变量名应该以一个有意义小写字母开始：</p>

<p>可以使用的前缀：</p>

<ul>
  <li>i integer</li>
  <li>f float/double</li>
  <li>s string</li>
  <li>a array</li>
  <li>o object</li>
  <li>r resource</li>
  <li>b boolean</li>
  <li>is boolean</li>
</ul>

<p>前缀后面的单词的首字母都以大写字母开头。如果你需要声明一个私有变量，你可以使用下划线。例如(PHP):</p>

<pre><code>public $isFirstName=""some value";
publid $isSeconedName="some value";
private $_iVariable;
$iDigit1=$iDigit2=10;
$oMyClass=new MyClass();
</code></pre>

<h3 id="constant-names">4.常量名字（Constant names)</h3>

<p>常量是静态变量，它意味着它的值是不会改变的。一般情况下，我们使用所有大写字母来命名常量（不要忘记可以使用可能的前缀），例如：</p>

<pre><code>define("PRJ_WEBSITE","HTTP://www.website.com/");
define("PRJ_GLOBAL_CURRENCY","$");
</code></pre>

<h3 id="section">5.函数声明（名字和格式）</h3>

<p>所有的函数的名字都应该以小学字母开始，并且每个单词的首字母都应该使用大写字母。大括号应该和函数名在同一行（在参数之后）。例如：</p>

<pre><code>function getPropertyValue($sName){
//your custom code is here
}
function setPropertyValue($sName,$sValue){
//your custom code is here
}
</code></pre>

<h3 id="special-structures-formatting">6.特殊结构规范（special structures formatting)</h3>

<p>特殊结构，例如if/else,foreeach,while等因遵循以下规则：</p>

<ul>
  <li>结构名和随后的圆括号之间需要一个空格（增加可读性）</li>
  <li>包含在花括号里的条件语言应该使用空格使其分开（增加可读性）</li>
  <li>在左边圆括号之后和右边圆括号之前不应该有空格</li>
  <li>Open curly brace（大括号）在同一行</li>
  <li>内部的条件语句应该使用tab来缩进</li>
</ul>

<p>例如：</p>

<pre><code>foreeach($akey as $iKey=&gt;$sValue){
 //your custom code is here
}

if($bCondition){
   //your custom code is here
}else{
//your custom code is here
}

switch($sKey){
 case 1:
 //your custom code is here
 break;
 case 2:
 //your custom code is here
 break;
 case 3:
 //your custom code is here
 break;
 default:
//your custom code is here
 break;
}
</code></pre>

<h3 id="database-table-names">7.数据库表格名字（Database table names)</h3>

<p>当你创建一个表格时，使用容易理解的前缀，并使用下划线将每个单词分开。使用大写字母不是必须的。表格的关键字同样适用，例如：</p>

<pre><code>CREATE TABLE IF NOT EXISTS 'myprj_records_table'(
   'id' int(11) NOT NULL AUTO_INCREMENT,
   'pid' int(11) NOT NULL,
   'snippet' varchar(128) NOT NULL,
   'description' varchar(255) NOT NULL,
} ENGLISH=MyISAM DEFAULT　CHARSET=utf-8;
</code></pre>

<h3 id="section-1">8.工程文件结构</h3>

<p>当我们在团队工作时保持一个良好的文件结构式很重要的。不要将所有的文件放在一个单独的文件里，这样会很混乱。例如：</p>

<pre><code>/root folder
  /backup
  /cache
  /classes
  /css
  /js
  /media
/images
/mp3
/video

index.php
otherFiles.php
</code></pre>

<hr />

<h3 id="section-2">总结：</h3>

<p>最后，我想说我不能强迫你遵循上面提到的规则，这只是建议。实际上，很多开发团队会使用他们自己的变成习惯，但是无论如何，我们的建议会所有人都很有帮助。我希望你喜欢这篇文章。我会非常感谢你将其分享给你的朋友们。祝你好运并欢迎再次回访！    </p>

<p>原文地址：<a href="http://www.script-tutorials.com/coding-conventions-in-web-development/">http://www.script-tutorials.com/coding-conventions-in-web-development/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[函数声明和函数表达式（function declarations vs function expressions）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/09/function-declarations-vs-function-expressions/"/>
    <updated>2013-10-09T13:54:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/09/function-declarations-vs-function-expressions</id>
    <content type="html"><![CDATA[<p>原文地址：<a href="http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/">http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/</a></p>

<p>在开始之前先提出一下几个问题。在下面的几种情况下弹出内容分别是什么？
<!--more-->
情况1:</p>

<pre><code>function foo(){
function bar() {
return 3;
}
return bar();
function bar() {
return 8;
}
}
alert(foo());
</code></pre>

<p>情况2：
    function foo(){
    var bar = function() {
    return 3;
    };
    return bar();
    var bar = function() {
    return 8;
    };
    }
    alert(foo());</p>

<p>情况3：</p>

<pre><code>alert(foo());
function foo(){
var bar = function() {
return 3;
};
return bar();
var bar = function() {
return 8;
};
}
</code></pre>

<p>情况4：</p>

<pre><code>function foo(){
return bar();
var bar = function() {
return 3;
};
var bar = function() {
return 8;
};
}
alert(foo());
</code></pre>

<p>如果你给出的答案不是8,3,3和[报出错误：bar is not a function],请继续往下读（确实要往下读=-=）</p>

<h4 id="section">什么是函数声明？</h4>

<p>函数声明是定义了一个命名了的函数变量，并不需要声明变量。函数声明出现正独立的结构中并且不能嵌套在非函数代码块中。对比一下变量的声明就比较好理解了。就像变量什么声明那样要以“var”开头，函数声明则以”function“开头。</p>

<p>例如：</p>

<pre><code>function bar() {
return 3;
}
</code></pre>

<p>ECMA5(13.0)定义的语法规则为：</p>

<pre><code>function Identifier ( FormalParameterListopt ) { FunctionBody }
</code></pre>

<p>函数的名字在它的做作用域和其父作用域中都是可见的（这样非常好，否则它将不可读）</p>

<pre><code>function bar() {
return 3;
}
 
bar() //3
bar  //function
</code></pre>

<h4 id="section-1">什么是函数表达式？</h4>

<p>一个函数表达式定义了一个大量表达式语义的一个部分（通常是一个变量委派）。通过函数表达式可以定义带名称的函数也可以是一个匿名函数。函数表达式不一定需要以”function”开始（因此下面的用圆括号包围的是self invoking例子）</p>

<p>例如：</p>

<pre><code>//anonymous function expression
var a = function() {
return 3;
}
 
//named function expression
var a = function bar() {
return 3;
}
 
//self invoking function expression
(function sayHello() {
alert("hello!");
})();
</code></pre>

<p>ECMA 5（13.0）定义的语法规则为：</p>

<pre><code>function Identifieropt ( FormalParameterListopt ) { FunctionBody }
</code></pre>

<p>（虽然这会让你感觉不完全，因为它遗漏了必要的条件（就是生命了一个表达式并没有以“function”开头）
函数名（任何）在其作用域之外是不可见的（和函数声明是相反的）、</p>

<h4 id="statement">什么是函数Statement？</h4>

<p>又是可以把它看做是函数声明的别名。但是kangax指出，在mozilla中一个函数statement是一个函数声明的拓展，允许函数声明语法在声明允许的任何地方使用。当然现在还没有任何标准，所以不推荐用于产品的开发。</p>

<h4 id="section-2">关于问题的解答</h4>

<p>问题1使用函数声明，意味着他取得了hoisted…</p>

<h4 id="hoisted">等等，什么是hoisted？</h4>

<p>引用Ben cherry的文章里的一句话“函数声明和函数变量总是被编译器移动到javascript作用域的最上面”。</p>

<p>函数声明会覆盖前面的函数声明，所以当编译器处理完情况1中的代码后，执行的效果是这样的：</p>

<pre><code>//**Simulated processing sequence for Question 1**
function foo(){
//define bar once
function bar() {
return 3;
}
//redefine it
function bar() {
return 8;
}
//return its invocation
return bar(); //8
}
alert(foo());
</code></pre>

<h4 id="section-3">但是我们总是受到这样的教训：返回一个不可获取的声明之后编写代码</h4>

<p>javascript执行上下文（ECMA5将其分为LexicalEnvironment,VariableEnvironment,和ThisBinding)和处理（一些被激活的状态队列）。声明属于VariableEnvironment当执行域被键入时。它们是和statement区分开来的，并不遵循处理的规则。</p>

<h4 id="section-4">函数表达式不能被挂起吗？</h4>

<p>这个要根据表达式来做判断。让我们看看问题2的表达式：</p>

<pre><code>var bar = function() {
return 3;
};
</code></pre>

<p>左边的（var bat）是一个变量声明。变量声明被挂起但是赋予它的表达式并没有。所以当bar被挂起，编译器最初将其设置为var bar=underfined.函数定义本身并没有被挂起。</p>

<p>(ECMA 5 12.2 A变量和一个初始化器被赋值为它的AssignmentExpression,当VariableStatement被执行，并不是当变量被创建时）</p>

<p>因此问题2中的代码执行的更加有顺序。</p>

<pre><code>//**Simulated processing sequence for Question 2**
function foo(){
//a declaration for each function expression
var bar = undefined;
var bar = undefined;
//first Function Expression is executed
bar = function() {
return 3;
};
// Function created by first Function Expression is invoked
return bar();
// second Function Expression unreachable
}
alert(foo()); //3
</code></pre>

<h4 id="ok-i-think-that-makes-sense-by-the-way-youre-wrong-about-question-3-i-ran-it-in-firebug-and-got-an-error">Ok I think that makes sense. By the way, you’re wrong about Question 3. I ran it in Firebug and got an error</h4>

<p>Try saving it in an HTML file and running it over Firefox. Or run it in IE8, Chrome or Safari consoles. Apparently the Firebug console does not practice function hoisting when it runs in its “global” scope (which is actually not global but a special “Firebug” scope – try running “this == window” in the Firebug console).</p>

<h4 id="question-3-is-based-on-similar-logic-to-question-1-this-time-it-is-the-foo-function-that-gets-hoisted">Question 3 is based on similar logic to Question 1. This time it is the foo function that gets hoisted.</h4>

<p>Now Question 4 seems easy. No function hoisting here…</p>

<p>Almost. If there were no hoisting at all, the TypeError would be “bar not defined” and not “bar not a function”. There’s no function hoisting, however there is variable hoisting. Thus bar gets declared up front but its value is not defined. Everything else runs to order.</p>

<pre><code>//**Simulated processing sequence for Question 4**
function foo(){
//a declaration for each function expression
var bar = undefined;
var bar = undefined;
return bar(); //TypeError: "bar not defined"
//neither Function Expression is reached
}
alert(foo());
</code></pre>

<h4 id="what-else-should-i-watch-out-for">What else should I watch out for?</h4>

<p>Function Declarations are officially prohibited within non-function blocks (such as if) . However all browsers allow them and interpret them in different ways.</p>

<p>For example the following code snippet in Firefox 3.6 throws an error because it interprets the Function Declaration as a Function Statement (see above) so x is not defined. However in IE8, Chrome 5 and Safari 5 the function x is returned (as expected with standard Function Declarations).</p>

<pre><code>function foo() {
if(false) {
function x() {};
}
return x;
}
alert(foo());
</code></pre>

<h4 id="i-can-see-how-using-function-declarations-can-cause-confusion-but-are-there-any-benefits">I can see how using Function Declarations can cause confusion but are there any benefits?</h4>

<p>Well you could argue that Function Declarations are forgiving – if you try to use a function before it is declared, hoisting fixes the order and the function gets called without mishap. But that kind of forgiveness does not encourage tight coding and in the long run is probably more likely to promote surprises than prevent them. After all, programmers arrange their statements in a particular sequence for a reason.</p>

<h4 id="and-there-are-other-reasons-to-favour-function-expressions">And there are other reasons to favour Function Expressions?</h4>

<p>How did you guess?</p>

<p>a) Function Declarations feel like they were intended to mimic Java style method declarations but Java methods are very different animals. In JavaScript functions are living objects with values. Java methods are just metadata storage. Both the following snippets define functions but only the Function Expression suggests that we are creating an object.</p>

<p>//Function Declaration
function add(a,b) {return a + b};
//Function Expression
var add = function(a,b) {return a + b}; </p>

<p>b) Function Expressions are more versatile. A Function Declaration can only exist as a “statement” in isolation. All it can do is create an object variable parented by its current scope. In contrast a Function Expression (by definition) is part of a larger construct. If you want to create an anonymous function or assign a function to a prototype or as a property of some other object you need a Function Expression. Whenever you create a new function using a high order application such as curry or compose you are using a Function Expression. Function Expressions and Functional Programming are inseparable.</p>

<pre><code>//Function Expression
var sayHello = alert.curry("hello!");
</code></pre>

<h4 id="do-function-expressions-have-any-drawbacks">Do Function Expressions have any drawbacks?</h4>

<p>Typically functions created by Function Expressions are unnamed. For instance the following function is anonymous, today is just a reference to an unnamed function:</p>

<pre><code>var today = function() {return new Date()}
</code></pre>

<p>Does this really matter? Mostly it doesn’t, but as Nick Fitzgerald has pointed out debugging with anonymous functions can be frustrating. He suggests using Named Function Expressions (NFEs) as a workaround:</p>

<pre><code>var today = function today() {return new Date()}
</code></pre>

<p>However as Asen Bozhilov points out (and Kangax documents) NFEs do not work correctly in IE &lt; 9</p>

<h4 id="conclusions">Conclusions?</h4>

<p>Badly placed Function Declarations are misleading and there are few (if any) situations where you can’t use a Function Expression assigned to a variable instead. However if you must use Function Declarations, it will minimize confusion if you place them at the top of the scope to which they belong. I would never place a Function Declarations in an if statement.</p>

<p>Having said all this you may well find yourself in situations where it makes sense to use a Function Declaration. That’s fine. Slavish adherance to rules is dangerous and often results in tortuous code. Much more important is that you understand the concepts so that you can make your own informed decisions. I hope this article helps in that regard.</p>

<p>Comments are very welcome. Please let me know if you feel anything I’ve said is incorrect or if you have something to add.</p>

<p>See also <a href="http://es5.github.io/">ECMA-262 5th Edition</a> sections 10.5, 12.2, 13.0, 13.2</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[完美页面解析（Infographic:Anatomy of a perfect page）]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/10/08/infographic-anatomy-of-a-perfect-page/"/>
    <updated>2013-10-08T16:19:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/10/08/infographic-anatomy-of-a-perfect-page</id>
    <content type="html"><![CDATA[<p>人们总对海报的主题收藏很感兴趣。尤其是与他们有关的活动信息。今天，我收集了一些关于web页面的一些布局结构信息。这些海报给出了很多页面设计的一些意见和建议。这些信息相信对网页设计和开发这都有很多用处。</p>

<p>海报是传递信息给读者的最好的方法之一，他可以将一些新闻或者其他的一些有用的信息放在一个地方。现在许多人没有足够的时间来阅读多页面的文本。海报让信息更容易被传播和理解。接下来将分享一下有关web的一些海报。
<!--more-->
<img src="http://www.script-tutorials.com/demos/infographics/15/effective-homepage-750.jpg" alt="" /></p>

<p>资源地址: <a href="http://blog.kissmetrics.com/wp-content/uploads/2011/10/effective-homepage.png">The Anatomy of an Effective Homepage</a></p>

<p><img src="http://www.script-tutorials.com/demos/infographics/15/beautiful-html-750.jpg" alt="" /></p>

<p>资源地址：<a href="http://css-tricks.com/examples/CleanCode/Beautiful-HTML.png">What Beautiful HTML Code Looks Like</a></p>

<p><img src="http://www.script-tutorials.com/demos/infographics/15/anatomy-perfect-landing-page-750.jpg" alt="" /></p>

<p>资源地址：<a href="Anatomy Of A Perfect Landing Page">Anatomy Of A Perfect Landing Page</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用PHP和AJAX制作日历]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/09/27/php-ajax-calender/"/>
    <updated>2013-09-27T14:41:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/09/27/php-ajax-calender</id>
    <content type="html"><![CDATA[<p>在很多网站，日历是一个必要的组成部分。通常这些日历是jquery的一个插件，但是也可以用php来实现。今天我将使用ajax技术展示一个月份的日历，可以通过左右箭头切换月份。由于是ajax,这个日历还有其他的优点，它是一个响应式的移动日历。在开始编写代码之前，我建议你先看看我们的demo.</p>

<p><img src="http://www.script-tutorials.com/demos/361/php_ajax_calendar.png" alt="" /></p>

<p><a href="http://www.script-tutorials.com/demos/361/">在线演示</a>
<a href="http://www.script-tutorials.com/demos/361/source.zip">下载源文件</a></p>

<hr />
<p>文件结构：</p>

<p>在开始之前，让我们先为我们的文件定义一个清晰的文件夹结构：</p>

<ul>
  <li>css-存放所有的css文件</li>
  <li>images-存放所有可能用到的图片</li>
  <li>templates-存放所有的模板文件
<!--more-->
### 第一步 编写HTML文件 ###</li>
</ul>

<p>我们不使用任何特定的系统模板（如Smarty），我们将只使用我们自己写的一个简单的html模板。</p>

<p>templates/index.html</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /&gt;
&lt;title&gt;PHP AJAX Calendar&lt;/title&gt;

&lt;!-- add styles and scripts --&gt;
&lt;link href="css/styles.css" rel="stylesheet" type="text/css" /&gt;
&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="calendar"&gt;
__calendar__
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>这个一个非常简单的index页面模板，我们在这定义了一个日历的父容器。另一个模板将会被用作日历的内部容器。</p>

<p>templates/celendar.html</p>

<pre><code>&lt;div class="navigation"&gt;
&lt;a class="prev" href="index.php?month=__prev_month__" onclick="$('#calendar').load('index.php?month=__prev_month__&amp;_r=' + Math.random()); return false;"&gt;&lt;/a&gt;
&lt;div class="title" &gt;__cal_caption__&lt;/div&gt;
&lt;a class="next" href="index.php?month=__next_month__" onclick="$('#calendar').load('index.php?month=__next_month__&amp;_r=' + Math.random()); return false;"&gt;&lt;/a&gt;
&lt;/div&gt;

&lt;table&gt;
&lt;tr&gt;
&lt;th class="weekday"&gt;sun&lt;/th&gt;
&lt;th class="weekday"&gt;mon&lt;/th&gt;
&lt;th class="weekday"&gt;tue&lt;/th&gt;
&lt;th class="weekday"&gt;wed&lt;/th&gt;
&lt;th class="weekday"&gt;thu&lt;/th&gt;
&lt;th class="weekday"&gt;fri&lt;/th&gt;
&lt;th class="weekday"&gt;sat&lt;/th&gt;
&lt;/tr&gt;
__cal_rows__
&lt;/table&gt;
</code></pre>

<p>这是因为对于ajax的请求，我们不需要返回任何东西，除了内部的日历内容。</p>

<h3 id="php">第二步 PHP</h3>

<p>给日历添加行为</p>

<p>index.php</p>

<pre><code>// Get current year, month and day
list($iNowYear, $iNowMonth, $iNowDay) = explode('-', date('Y-m-d'));

// Get current year and month depending on possible GET parameters
if (isset($_GET['month'])) {
list($iMonth, $iYear) = explode('-', $_GET['month']);
$iMonth = (int)$iMonth;
$iYear = (int)$iYear;
} else {
list($iMonth, $iYear) = explode('-', date('n-Y'));
}

// Get name and number of days of specified month
$iTimestamp = mktime(0, 0, 0, $iMonth, $iNowDay, $iYear);
list($sMonthName, $iDaysInMonth) = explode('-', date('F-t', $iTimestamp));

// Get previous year and month
$iPrevYear = $iYear;
$iPrevMonth = $iMonth - 1;
if ($iPrevMonth &lt;= 0) {
$iPrevYear--;
$iPrevMonth = 12; // set to December
}

// Get next year and month
$iNextYear = $iYear;
$iNextMonth = $iMonth + 1;
if ($iNextMonth &gt; 12) {
$iNextYear++;
$iNextMonth = 1;
}

// Get number of days of previous month
$iPrevDaysInMonth = (int)date('t', mktime(0, 0, 0, $iPrevMonth, $iNowDay, $iPrevYear));

// Get numeric representation of the day of the week of the first day of specified (current) month
$iFirstDayDow = (int)date('w', mktime(0, 0, 0, $iMonth, 1, $iYear));

// On what day the previous month begins
$iPrevShowFrom = $iPrevDaysInMonth - $iFirstDayDow + 1;

// If previous month
$bPreviousMonth = ($iFirstDayDow &gt; 0);

// Initial day
$iCurrentDay = ($bPreviousMonth) ? $iPrevShowFrom : 1;

$bNextMonth = false;
$sCalTblRows = '';

// Generate rows for the calendar
for ($i = 0; $i &lt; 6; $i++) { // 6-weeks range
$sCalTblRows .= '&lt;tr&gt;';
for ($j = 0; $j &lt; 7; $j++) { // 7 days a week

$sClass = '';
if ($iNowYear == $iYear &amp;&amp; $iNowMonth == $iMonth &amp;&amp; $iNowDay == $iCurrentDay &amp;&amp; !$bPreviousMonth &amp;&amp; !$bNextMonth) {
$sClass = 'today';
} elseif (!$bPreviousMonth &amp;&amp; !$bNextMonth) {
$sClass = 'current';
}
$sCalTblRows .= '&lt;td class="'.$sClass.'"&gt;&lt;a href="javascript: void(0)"&gt;'.$iCurrentDay.'&lt;/a&gt;&lt;/td&gt;';

// Next day
$iCurrentDay++;
if ($bPreviousMonth &amp;&amp; $iCurrentDay &gt; $iPrevDaysInMonth) {
$bPreviousMonth = false;
$iCurrentDay = 1;
}
if (!$bPreviousMonth &amp;&amp; !$bNextMonth &amp;&amp; $iCurrentDay &gt; $iDaysInMonth) {
$bNextMonth = true;
$iCurrentDay = 1;
}
}
$sCalTblRows .= '&lt;/tr&gt;';
}

// Prepare replacement keys and generate the calendar
$aKeys = array(
'__prev_month__' =&gt; "{$iPrevMonth}-{$iPrevYear}",
'__next_month__' =&gt; "{$iNextMonth}-{$iNextYear}",
'__cal_caption__' =&gt; $sMonthName . ', ' . $iYear,
'__cal_rows__' =&gt; $sCalTblRows,
);
$sCalendarItself = strtr(file_get_contents('templates/calendar.html'), $aKeys);

// AJAX requests - return the calendar
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) &amp;&amp; $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest' &amp;&amp; isset($_GET['month'])) {
header('Content-Type: text/html; charset=utf-8');
echo $sCalendarItself;
exit;
}

$aVariables = array(
'__calendar__' =&gt; $sCalendarItself,
);
echo strtr(file_get_contents('templates/index.html'), $aVariables);
</code></pre>

<p>我尽量为每行代码都加上了注释，目的是为了让你更加容易理解整个处理过程。开始我们创建了日历相关的当前日期很请求日期。然后我们生成日历表格，最后我们将模板的关键字替换掉。在Ajax请求时，我们只翻译日历内部的内容($sCalendarItself)，否则我们将显示整个页面。</p>

<h3 id="css">第三步 CSS</h3>

<p>现在，我们的日历看起来不那么美观，因为只有html代码。让我们装饰一下我们的日历吧！</p>

<p>css/style.css</p>

<pre><code>/* calendar styles */
#calendar {
-moz-user-select: none;
border: 1px solid #EEEEEE;
border-radius: 6px 6px 6px 6px;
color: #333333;
font-family: Arial,sans-serif;
font-size: 1.1em;
margin: 10px auto;
padding: 0.4em;
width: 90%;
}
#calendar .navigation {
background-color: #CC0000;
border: 1px solid #E3A1A1;
border-radius: 6px 6px 6px 6px;
color: #FFFFFF;
font-weight: bold;
padding: 1px;
position: relative;
}
#calendar .navigation .title {
background: none repeat scroll 0 0 transparent;
border-color: rgba(0, 0, 0, 0);
color: inherit;
line-height: 1.8em;
margin: 0 2.3em;
text-align: center;
}
#calendar .navigation .prev, #calendar .navigation .next {
background-image: url(../images/nav.png);
height: 24px;
opacity: 0.9;
position: absolute;
top: 4px;
width: 24px;
}
#calendar .navigation .prev {
background-position: 0 0;
left: 4px;
}
#calendar .navigation .next {
background-position: -24px 0;
right: 4px;
}
#calendar .navigation .prev:hover, #calendar .navigation .next:hover {
opacity: 1;
}
#calendar table {
border-collapse: collapse;
font-size: 0.9em;
table-layout: fixed;
width: 100%;
}
#calendar table th {
border: 0 none;
font-weight: bold;
padding: 0.7em 0.3em;
text-align: center;
}
#calendar table td {
border: 0 none;
padding: 1px;
}
#calendar table td a {
background-color: #EEEEEE;
border: 1px solid #D8DCDF;
color: #004276;
display: block;
font-weight: normal;
opacity: 0.7;
padding: 0.2em;
text-align: right;
text-decoration: none;
}
#calendar table td a:hover {
background-color: #F6F6F6;
border: 1px solid #CDD5DA;
color: #111111;
}
#calendar table td.current a {
font-weight: bold;
opacity: 1;
}
#calendar table td.today a {
background-color: #FBF8EE;
border: 1px solid #FCD3A1;
color: #444444;
font-weight: bold;
opacity: 1;
}
</code></pre>

<h3 id="section">第四步 图片</h3>

<p>这里只要使用一个很小的导航图片就行了</p>

<p><img src="http://www.script-tutorials.com/demos/361/images/nav.png" alt="" /></p>

<h3 id="section-1">总结</h3>

<p>这就是今天的所有内容，我们只是准备了响应式风格的日历。感谢你耐心看完本文，如果你喜欢的话，请使用下面的社交工具将它分享给你的朋友吧！</p>

<p>原文地址：<a href="http://www.script-tutorials.com/php-ajax-calendar/">http://www.script-tutorials.com/php-ajax-calendar/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[jQuery 入门总结]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/09/24/jquery-tutorials-sumary/"/>
    <updated>2013-09-24T13:55:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/09/24/jquery-tutorials-sumary</id>
    <content type="html"><![CDATA[<p>今天放假，没地方可去，给新手推荐点 jQuery 教程吧。</p>

<h4 id="jquery-jquery-jquery">1、《15天学会jQuery》这本书间的很基础，很适合于新手，大致从基础讲了一些 什么是jQuery 以及jQuery的使用和常用函数。</h4>
<p>麻雀虽小五脏俱全。
<!--more-->
下载地址：<a href="http://julying.com/blog/uploadfile/2011/0403/20110403024320212.rar">http://julying.com/blog/uploadfile/2011/0403/20110403024320212.rar</a></p>

<h3 id="jquery-142">2、《jQuery 教程、帮助文档1.4.2》。</h3>

<p>学习，从模仿开始。如果你想把jQuery 学好，那么你必须熟记常用函数，你要知道 jQuery 能做什么，不能做什么。
老手偶尔用这个查一下函数的使用方法，
新手应该反复练习教程中列举的所有函数，做到而能详熟。</p>

<p>下载地址： <a href="http://julying.com/blog/uploadfile/2011/0403/20110403052022136.chm">http://julying.com/blog/uploadfile/2011/0403/20110403052022136.chm</a></p>

<h3 id="jquery-">3、学完这两个，你就可以模仿、研究别人的 jQuery 插件了，甚至自己开发插件。</h3>

<h3 id="jquery--jquery">4、如果你用 jQuery 比较少，是一个后台程序员，那么你按照上面的步骤简单学习 jQuery就可以了；</h3>
<p>如果你想学好 jQuery ，做一个厉害的前端攻城师，我建议你先学习一本 javascript 教程，再来学 jQuery。 因为 jQuery 仅仅是 javascript 的一个函数库，而已。
世间万事万物，都是需要一个根、一个基础。
特别是计算机编程，基础越扎实，以后的成就越高，就会很容易突破少有瓶颈，这也是 一个 三流大学 和一个 一流大学 毕业生之间的重要差别之一。</p>

<h3 id="section">5、 在新手看来，总是不断涌现很多新技术。</h3>
<p>在高手看来，新技术不过是就技术的延伸、多态、继承。</p>

<h3 id="section-1">6、很多人，都很迫切急于求成。</h3>
<p>好像各行各业都是，整个中国都特别的浮躁，大家都特别的急功近利。
然、每个人心中都有一个江湖。
写代码就像练武功，古代的那些武者，三十年磨一剑。
对于新手，我要说的就是，低头做事，抬头看路，只问耕耘、不问收获，踏踏实实做人、做事，三年之后，武功必成。
如果你勤勤恳恳努力三年，背会jQuery绝大多数函数，理解方法，熟记 jQuery 源代码设计思路，想进 腾讯，百度这种级别公司是相当容易的。</p>

<h3 id="section-2">7、大道至简，知易行难</h3>
<p>编写代码到最后就会上升到“禅”的境界，正所谓，世间大道、殊途同归。</p>

<h3 id="javascript">8、推荐一篇文章吧：《悟透Javascript》</h3>
<p>下载地址：<a href="http://julying.com/blog/uploadfile/2011/0403/20110403054528605.pdf">http://julying.com/blog/uploadfile/2011/0403/20110403054528605.pdf</a></p>

<p>原文地址：<a href="http://julying.com/blog/tutorial-of-jquery-point-summary/">http://julying.com/blog/tutorial-of-jquery-point-summary/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[面向 Java 开发人员的 Ajax: Google Web Toolkit 入门]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/09/23/google-web-toolkit-for-beginer/"/>
    <updated>2013-09-23T13:54:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/09/23/google-web-toolkit-for-beginer</id>
    <content type="html"><![CDATA[<p>简介： Ajax 被用于创建更加动态和交互性更好的 Web 应用程序。Google Web Toolkit (简称GWT) 是 Google 推出的 Ajax 应用开发包，GWT 支持开发者使用Java 语言开发 Ajax 应用。本文中作者将介绍如何使用 GWT 开发 Ajax 应用的基本方法和步骤。
<!--more-->
## Ajax简介 ##
Ajax是 Asynchronous JavaScript and XML（以及 DHTML 等）的缩写，由XHTML、CSS、JavaScript、XMLHttpRequest、XML等技术组合而成，是当前Web应用开发领域的热门技术，用于创建更加动态和交互性更好的Web应用程序，提升用户的浏览体验。
Ajax的核心是JavaScript对象XmlHttpRequest。XmlHttpRequest处理所有服务器通信的对象，是一种支持异步请求的技术。简而言之，XmlHttpRequest使您可以使用JavaScript向服务器提出请求并处理响应，而不阻塞用户。
Ajax并不是本文的中心关注点，因此这里不再赘述，请大家访问参考资源区的相关链接，了解更多关于Ajax技术和应用方面的知识。</p>

<h2 id="gwt">为什么选择GWT？</h2>

<p>众所周知，即使对于Ajax技术非常熟悉的开发者而言，Ajax应用的开发和调试过程也不是一件容易的事情，更困难的是，到目前为止，一直没有出现合适的开发工具能够支持Ajax应用的开发和调试。
与此相反的是，Java语言–企业应用开发的主流语言-的开发和调试过程却因为有各种各样开发工具的支持而简单的多，而且这样的开发工具我们可以免费获得，比如Eclipse、NetBeans。
如果能够应用Java语言开发Ajax，Ajax应用开发的最大难题-开发工具的缺失-就将迎刃而解。这种情况下，我们就可以既充分利用Java语言的开发优势降低Ajax应用开发的难度，加快Ajax应用的开发速度，为Ajax的大规模应用创造可能，又可以充分发挥Ajax技术的优势，创建更加动态和交互性更好的Web应用程序，提升用户的浏览体验。
Google Web Toolkit(简称GWT)的出现为我们提供了这种可能。GWT是Google推出的Ajax应用开发包，支持开发者使用Java语言开发Ajax应用。GWT框架本身是开源的，但是GWT中的开发工具仅仅提供开发用License，不允许分发。
GWT提供了一组基于Java语言的开发包，这个开发包的设计参考Java AWT包设计，类命名规则、接口设计、事件监听等都和AWT非常类似。熟悉Java AWT的开发者不需要花费多大的力气就能够快速的理解GWT开发工具包，将更多地时间投入到GWT应用的开发过程中。
开发出来的Java应用将由GWT开发包提供的编译工具编译后声生成对应的、应用了Ajax技术的Web应用，Java应用中出现的、和服务器之间的交互动作被自动生成的异步调用代码所代替。</p>

<h2 id="gwt-1">GWT特性</h2>

<p>GWT除了支持将应用Java语言开发的应用转化为Ajax应用，同时提供了更多的高级特性，下面是这些特性的简单描述。</p>

<ol>
  <li>GWT编译器
GWT编译器是GWT的核心，负责完成将Java代码翻译很Ajax内容的工作。GWT编译器能够翻译Java语言的大部分特性。包括支持Java语言中的基本类型、违例处理等，支持java.lang包和java.util包中的绝大部分类和接口，支持正则表达式和序列化。</li>
  <li>跨平台支持
如果你使用GWT中提供的显示组件(比如Button)和组装组件(比如VerticalPanel)，GWT编译生成的Ajax应用能够支持大部分的浏览器和操作系统，比如Internet Explorer、Firefox等，也能够支持Linux、Windows等不同操作系统。这是因为GWT最大限度的将这些控件翻译成浏览器内置的类型。比如Button类编译后生成的是标准HTML：<input type="button" />。
GWT建议使用CSS修饰页面元素的显示效果。GWT的类中很少提供访问页面元素样式属性的方法，我们可以直接在CSS文件中通过对应的样式名称来设置页面元素的默认显示效果。比如使用 .gwt-Button { font-size: 150%; } 使用Button元素的默认显示效果。</li>
  <li>宿主模式(Hosted Mode)
宿主模式是指我们和没有转换为Ajax应用的GWT应用交互的状态。当我们开发和调试时，我们就一直处在宿主模式下。在这种情况下，Java虚拟机使用GWT内置的浏览器运行GWT应用编译后的class内容，因此能够提供”编码、测试、调试”过程的最佳速度。
我们可以运行com.google.gwt.dev.GWTShell启动宿主模式。</li>
  <li>Web模式(Web Mode)
Web模式是指已经成功转化为Ajax应用的状态，这种状态下，我们已经开始通过Web方式来访问Ajax应用了。
在Web模式下运行时，不再需要GWT工具包或者JVM的支持。</li>
  <li>命令行工具
GWT工具包中提供了几个非常适用的小工具来帮助我们更快的建立GWT应用开发环境：projectCreator、applicationCreator、junitCreator。
projectCreator 
创建在Eclipse中开发GWT应用所需要的项目基本文件和可选的Ant buildfile文件。
applicationCreator 
applicationCreator命令用于创建基本的HelloWorld！应用和GWT应用开发环境。
junitCreator 
生成junti测试代码。
通过上面的内容，我们已经了解了GWT工具集工作的基本原理和主要特性。有些迫不及待了吧，那么就请随我一起进入GWT应用开发的过程吧，享受应用Java语言开发Ajax应用带来的简单和便利。
本文中所有的环境准备、实例开发和说明均针对Windows操作平台，如果使用其他的操作系统，请根据实际情况进行适当的调整。</li>
</ol>

<h2 id="section">环境准备</h2>

<p>1、	下载和安装JDK1.4.X</p>

<p>GWT工具包的编译需要JDK支持，因此在安装GWT工具包之前请下载和安装合适的JDK。GWT工具支持Java语言1.4版本或者以下版本，因此JDK版本选择JDK1.4.X是比较合适的，不需要采用最新的JDK5.0或者更高版本。
请访问java.sun.com网站上下载安装版本，下载后安装到C:/jdk目录下，本书中的后续内容中将使用%JAVA_HOME%变量来引用这个目录。
您可以根据实际情况将JDK安装到任意目录下。但是在运行本文中例子的时候，请记住将对应的%JAVA_HOME%变量替换为您的实际安装目录。</p>

<p>2、	下载和安装GWT</p>

<p>请访问http://code.google.com/webtoolkit/下载GWT的最新版本，将下载的压缩文件解压缩到C:/GWT目录下。本书中的后续内容中将使用%GWT_HOME%变量来引用这个目录。
GWT工具包支持不同的操作系统，请根据自己的操作系统选择合适的安装包。</p>

<p>您可以根据实际情况将GWT安装到任意目录下。但是在运行本文中例子的时候，请记住将对应的%GWT_HOME%变量替换为您的实际安装目录。</p>

<h2 id="hello-world">第一个例子-Hello World！</h2>

<p>下面的内容中我们将介绍如何使用GWT工具集来完成第一个GWT的例子-“Hello World！”，并且将使用GWT编译及将他转化为Ajax应用，在浏览器中完成测试。
我们要完成的例子要实现的功能包括：</p>

<p>1、	在页面上显示一个按钮</p>

<p>2、	点击该按钮，默认情况下，我们将在按钮后面紧跟着显示字符串”Hello World!”。</p>

<p>3、	如果点击按钮时，”Hello World!”字符串已经显示在浏览器中，我们要将他隐藏起来。 我们现在开始使用GWT工具集完成”Hello World！”例子的开发，下面的步骤是完成”Hello World！”例子开发环境配置、应用开发、编译的基本步骤，同样适用于其他GWT应用的开发，只是根据实际情况可能有增减。</p>

<p>1、	创建GWT应用开发环境</p>

<p>从上面的GWT特性部分我们知道，GWT工具包中提供的applicationCreator命令行工具可以帮助我们创建GWT应用开发所需要的环境，因此我们可以直接使用applicationCreator帮助我们完成这项工作。
打开命令行工具，进入C:/根目录下，执行”mkdi”命令创建新的文件目录HelloWorld。</p>

<pre><code>C:\&gt; mkdir HelloWorld
</code></pre>

<p>执行下面的命令将%JAVA_HOME%\bin目录和%GWT_HOME%目录加入到PATH路径中。</p>

<pre><code>C:\&gt;set path=%JAVA_HOME%\bin;%GWT_HOME%
</code></pre>

<p>请将命令行中的%JAVA_HOME%替换为实际环境中JDK的安装目录，将%GWT_HOME%替换为GWT工具包的安装目录。
进入新创建的HelloWorld目录，然后运行applicationCreator命令创建GWT应用开发环境。</p>

<p>applicationCreator.cmd命令支持的语法如下。</p>

<p><code>ApplicationCreator [-eclipse projectName] [-out dir] [-overwrite] [-ignore] className</code> </p>

<p>其中最重要的一个参数是classname，也就是我们创建的GWT应用中的主Java类，我们这里选择使用<code>org.vivianj.gwt.client.HelloWorld。</code></p>

<pre><code>C:\HelloWorld&gt;applicationCreator.cmd org.vivianj.gwt.client.HelloWorld
</code></pre>

<p>根据GWT工具包的默认规则，GWT应用中的主Java类报名的最后一段必须是client。也就是说，只有xxx.client.Xxxx这样命名的Java类才能被识别为正确的GWT应用主类。
ApplicationCreator工具运行的时候，屏幕上会打印如下内容。</p>

<pre><code>Created directory C:\HelloWorld\src
Created directory C:\HelloWorld\src\org\vivianj\gwt
Created directory C:\HelloWorld\src\org\vivianj\gwt\client
Created directory C:\HelloWorld\src\org\vivianj\gwt\public
Created file C:\HelloWorld\src\org\vivianj\gwt\HelloWorld.gwt.xml
Created file C:\HelloWorld\src\org\vivianj\gwt\public\HelloWorld.html
Created file C:\HelloWorld\src\org\vivianj\gwt\client\HelloWorld.java
Created file C:\HelloWorld\HelloWorld-shell.cmd
Created file C:\HelloWorld\HelloWorld-compile.cmd
</code></pre>

<p>2、	开发”Hello World！”例子</p>

<p>使用ApplicationCreator工具的时候，ApplicationCreator工具其实已经帮我们生成了符合Hello World!例子要求的全部内容。为了不打断第一个例子的演示过程，我们先简单的了解一下ApplicationCreator工具的生成内容。我们将在将在测试过程后面做出更加详细的分析。</p>

<p>图1中显示了ApplicationCreator工具执行后生成的目录结构。</p>

<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image003.jpg" alt="" /></p>

<p>图1中的src\org\vivianj\gwt\client目录中的HelloWorld.java是GWT应用的主类；src\org\vivianj\gwt\public目录中的</p>

<p>HelloWorld.html文件是例子的默认页面；src\org\vivianj\gwt目录下的HelloWorld.gwt.xml是GWT应用的配置文件，提供GWT应用中页面和主类的配置信息；根目录下的HelloWorld-compile.cmd文件用于提供将该GWT应用编译成Ajax的命令；根目录下的HelloWorld-shell.cmd文件用于启动宿主模式(Hosted Mode)，方便测试GWT应用。</p>

<p>3、	在宿主模式下启动”Hello World！”例子
我们可以直接在命令行中执行HelloWorld-shell.cmd来启动宿主模式(Hosted Mode)，运行新创建的”Hello World！”例子。</p>

<pre><code>C:\HelloWorld&gt;HelloWorld-shell.cmd
</code></pre>

<p>这个命令将启动两个可视化界面：Google Web Toolkit Development Shell（见图2）和GWT内置的GWT应用浏览器（见图3），GWT应用浏览器中将显示”Hello World！”例子的初始界面，如果我们点击界面上的”Click Me”按钮，按钮后面将会显示”Hello World!”字符串（见图4），如果再次单击页面上的”Click Me”按钮，按钮后面的”Hello World！”字符串会消失。</p>

<h4 id="google-web-toolkit-development-shell">图2 Google Web Toolkit Development Shell运行界面</h4>

<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image005.jpg" alt="" /></p>

<h4 id="hello-world-1">图3 “Hello World！”例子初始运行界面</h4>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image007.jpg" alt="" /></p>

<h4 id="hello-world-clieck-me">图4 “Hello World！”例子-单击”Clieck Me”按钮后的界面</h4>

<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image009.jpghttp://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image009.jpg" alt="" /></p>

<h3 id="hello-world-2">4、	编译”Hello World！”例子</h3>
<p>要将GWT应用编译成Ajax应用，我们可以执行HelloWorld-compile.cmd。</p>

<pre><code>C:\HelloWorld&gt;HelloWorld-compile.cmd
</code></pre>

<p>命令运行时，界面上将会显示下面的内容。</p>

<pre><code>Output will be written into C:\HelloWorld\www\org.vivianj.gwt.HelloWorld
Copying all files found on public path
Compilation succeeded
</code></pre>

<p>其中的第一行显示生成的Ajax应用位于C:\HelloWorld\www\org.vivianj.gwt.HelloWorld目录下。</p>

<h4 id="hello-world-3">图5 “Hello World！”例子编译后的目录结构</h4>

<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image011.jpg" alt="" /></p>

<p>从上面的图中我们可以看到，新生成的www目录下有一个名为org.vivianj.gwt.HelloWorld的目录，它的命名规则是GWT主类全名(org.vivianj.gwt.client.HelloWorld)去掉其中的”client.”。</p>

<p>org.vivianj.gwt.HelloWorld目录下的HelloWorld.html文件就是”Hello World！”例子对应的页面，以.cache.html后缀结尾的文件就是”Hello World！”例子中对应的Ajax代码部分，而gwt.js文件则是GWT提供的、Ajax代码中需要用到的JavaScript公共函数。其他还有些辅助文件。</p>

<h4 id="webhello-world">5、	Web模式下测试”Hello World！”例子</h4>

<p>运行HelloWorld-compile.cmd后，GWT应用就已经被编译成Ajax应用了，不再依赖于JDK和GWT环境，而仅仅依赖于浏览器。
我们打开IE浏览器，打开C:\HelloWorld\www\org.vivianj.gwt.HelloWorld\HelloWorld.html文件，就可以看到”Hello World！”例子在Web模式下的运行效果（见图6），单击页面上的”Click Me”按钮，按钮后面会出现”Hello World！”字符串（见图7），如果再次单击页面上的”Click Me”按钮，按钮后面的”Hello World！”字符串会消失。</p>

<h4 id="webhelloworld">图6 Web模式下运行”HelloWorld！”例子的默认效果</h4>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image013.jpg" alt="" /></p>

<h4 id="webhelloworld-click-me">图7 Web模式下运行”HelloWorld！”例子-单击”Click Me”按钮后的效果</h4>

<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/images/image015.jpg" alt="" /></p>

<h2 id="section-1">实例详细分析</h2>

<p>上面的步骤中，我们已经完成第一个GWT应用的编译和测试，下面我们来详细的介绍一下GWT应用开发过程中涉及的几个文件：显示页面HelloWorld.html、主类HelloWorld和配置文件HelloWorld.gwt.xml。</p>

<h3 id="helloworldhtml">1.	显示页面HelloWorld.html</h3>

<p>GWT应用中的HTML内容必须存放在public目录下，public目录的全路径是”org\vivianj\gwt\ublic”，是将主类HelloWorld的包名”org.vivianj.gwt.client”中的client替换为”public”后形成的目录结构。</p>

<p>我们将主要介绍HelloWorld.html中和GWT相关的内容，HelloWorld.html文件的全部内容见清单1。</p>

<pre><code>24.&lt;meta name='gwt:module' content='org.vivianj.gwt.HelloWorld'&gt;
</code></pre>

<p>在HelloWorld.html文件的第24行，我们使用meta标签指定了本页面和GWT模块” org.vivianj.gwt.HelloWorld”之间的联系，meta标签的name属性是不变的，而content属性则是GWT主类全名(org.vivianj.gwt.client.HelloWorld)去掉其中的”client.”后的结果。</p>

<pre><code>40.	&lt;script language="javascript" src="gwt.js"&gt;&lt;/script&gt;
</code></pre>

<p>在HelloWorld.html文件的第40行，我们使用script标记引入GWT工具提供的默认函数库。根据HTML语言的规定，我们可以选择在&lt;head&gt;&lt;/head&gt;之间加入这行代码，也可以选择在&lt;body&gt;&lt;/body&gt;之间加入这段代码。GWT建议在&lt;head&gt;&lt;/head&gt;之间加入这行代码，以便获得稍微快一些的起动速度。</p>

<pre><code>56.	&lt;td id="slot1"&gt;&lt;/td&gt;&lt;td id="slot2"&gt;&lt;/td&gt;
</code></pre>

<p>在HelloWorld.html文件的第56行，我们使用td标签定义了两个相邻的表格单元格，他们分别命名为”slot1”和”slot2”，根据”HelloWorld!”例子的要求，名为”slot1”的单元格中应该显示按钮，而名为”slot2”的单元格中则根据情况决定显示”HelloWorld!”字符串或者不显示任何内容。
我们将在主类HelloWorld.java的源代码中使用RootPanel.get(“slot1”)来获得对该单元格的引用，请参考下面的”主类HelloWorld”部分的说明。</p>

<pre><code>43.	&lt;iframe id="__gwt_historyFrame" style="width:0;height:0;border:0"&gt;&lt;/iframe&gt;
</code></pre>

<p>在HelloWorld.html的第43行，我们使用iframe标签来设置当前页支持历史功能，iframe的属性必须和上面的内容保持一致，否则将不会起到任何效果。</p>

<p>清单1 src\org\vivianj\gwt\public\public\HelloWorld.html</p>

<pre><code>1.	&lt;html&gt;
2.		&lt;head&gt;
3.		
4.			&lt;!--   --&gt;
5.			&lt;!-- Any title is fine --&gt;
6.			&lt;!--   --&gt;
7.			&lt;title&gt;Wrapper HTML for HelloWorld&lt;/title&gt;
8.	
9.			&lt;!--   --&gt;
10.			&lt;!-- Use normal html, such as style--&gt;
11.			&lt;!--   --&gt;
12.			&lt;style&gt;
13.				body,td,a,div,.p{font-family:arial,sans-serif}
14.				div,td{color:#000000}
15.				a:link,.w,.w a:link{color:#0000cc}
16.				a:visited{color:#551a8b}
17.				a:active{color:#ff0000}
18.			&lt;/style&gt;
19.	
20.			&lt;!--   --&gt;
21.			&lt;!-- The module reference below is the link--&gt;
22.			&lt;!-- between html and your Web Toolkit module  --&gt;		
23.			&lt;!--   --&gt;
24.			&lt;meta name='gwt:module' content='org.vivianj.gwt.HelloWorld'&gt;
25.			
26.		&lt;/head&gt;
27.	
28.		&lt;!--   --&gt;
29.		&lt;!-- The body can have arbitrary html, or  --&gt;
30.		&lt;!-- you can leave the body empty if you want  --&gt;
31.		&lt;!-- to create a completely dynamic ui --&gt;
32.		&lt;!--   --&gt;
33.		&lt;body&gt;
34.	
35.			&lt;!----&gt;
36.			&lt;!-- This script is required bootstrap stuff.   --&gt;
37.			&lt;!-- You can put it in the HEAD, but startup--&gt;
38.			&lt;!-- is slightly faster if you include it here. --&gt;
39.			&lt;!----&gt;
40.			&lt;script language="javascript" src="gwt.js"&gt;&lt;/script&gt;
41.	
42.			&lt;!-- OPTIONAL: include this if you want history support --&gt;
43.			&lt;iframe id="__gwt_historyFrame"
style="width:0;height:0;border:0"&gt;&lt;/iframe&gt;
44.	
45.			&lt;h1&gt;HelloWorld&lt;/h1&gt;
46.	
47.			&lt;p&gt;
48.			This is an example of a host page for the HelloWorld application. 
49.			You can attach a Web Toolkit module to any HTML page you like, 
50.			making it easy to add bits of AJAX functionality to existing
pages 
51.			without starting from scratch.
52.			&lt;/p&gt;
53.	
54.			&lt;table align=center&gt;
55.				&lt;tr&gt;
56.					&lt;td id="slot1"&gt;&lt;/td&gt;&lt;td
id="slot2"&gt;&lt;/td&gt;
57.				&lt;/tr&gt;
58.			&lt;/table&gt;
59.		&lt;/body&gt;
60.	&lt;/html&gt;
</code></pre>

<h3 id="helloworld">2.	主类HelloWorld</h3>

<p>主类HelloWorld必须继承自com.google.gwt.core.client.EntryPoint类，并且覆盖其public void onModuleLoad()方法。
在onModuleLoad()方法中，我们使用GWT中提供的默认显示组件(比如Button)和组装组件(比如VerticalPanel)来设计需要显示的界面，所有这些组件都位于com.google.gwt.user.client.ui包下面。这些组件的命名规则和Java AWT的命名规则基本类似，使用方式也和AWT的基本一致，不过GWT中提供了不少的新组建可供选择，比如可以直接用VerticalPanel来实现垂直方向的布局管理。
HelloWorld.java中的19和20行，就声明了Button和Label两个显示组件。</p>

<pre><code>19.final Button button = new Button("Click me");
20.final Label label = new Label();
</code></pre>

<p>onModuleLoad()方法中，我们需要把生成的显示组件或者组装组建加入到显示页面的对应显示区域。首先，我们需要在页面上使用id属性为显示区域指定唯一的名称(参见清单1中的56行)。com.google.gwt.user.client.ui.RootPanel的静态方法get可以根据传入的字符串参数（参数值就是显示区域的id属性）获取页面上对应的显示区域。
HelloWorld.java的36、37行，就使用了RootPanel的get方法分别获得页面上id为”slot1”、”slot2”的显示区域，然后调用add方法将生成的Button和Label对象加入到显示区域中。</p>

<pre><code>36.RootPanel.get("slot1").add(button);
37.RootPanel.get("slot2").add(label);
</code></pre>

<p>Ajax最重要的功能就是为用户提供更好的交互体验，GWT中使用和AWT中相同的事件监听机制完成客户端事件监听，GWT中支持的Listener接口包括ChangeListener、ClickListener等。我们可以通过各种各样的Listener接口获得用户界面上所发生的动作，通过处理这些动作来完成对应业务逻辑。</p>

<p>HelloWorld.java中的第22行~29行的内容就实现了一个ClickListender接口，并且提供了对应的onClick方法实现，用于处理按钮点击后的业务逻辑（判断是否需要显示”Hello World!”字符串），然后调用Button对象的addClickListener方法增加监听器。</p>

<pre><code>22.button.addClickListener(new ClickListener() {
23.  public void onClick(Widget sender) {
24.if (label.getText().equals(""))
25.  label.setText("Hello World!");
26.else
27.  label.setText("");
28.  }
29.});
</code></pre>

<p>HelloWorld类的全部源代码内容见清单2。</p>

<p>清单2 src\org\vivianj\gwt\client\HelloWorld.java</p>

<pre><code>1.	package org.vivianj.gwt.client;
2.	
3.	import com.google.gwt.core.client.EntryPoint;
4.	import com.google.gwt.user.client.ui.Button;
5.	import com.google.gwt.user.client.ui.ClickListener;
6.	import com.google.gwt.user.client.ui.Label;
7.	import com.google.gwt.user.client.ui.RootPanel;
8.	import com.google.gwt.user.client.ui.Widget;
9.	
10.	/**
11.	 * Entry point classes define &lt;code&gt;onModuleLoad()&lt;/code&gt;.
12.	 */
13.	public class HelloWorld implements EntryPoint {
14.	
15.	  /**
16.	   * This is the entry point method.
17.	   */
18.	  public void onModuleLoad() {
19.	final Button button = new Button("Click me");
20.	final Label label = new Label();
21.	
22.	button.addClickListener(new ClickListener() {
23.	  public void onClick(Widget sender) {
24.	if (label.getText().equals(""))
25.	  label.setText("Hello World!");
26.	else
27.	  label.setText("");
28.	  }
29.	});
30.	
31.	// Assume that the host HTML has elements defined whose
32.	// IDs are "slot1", "slot2".  In a real app, you probably would not want
33.	// to hard-code IDs.  Instead, you could, for example, search for all 
34.	// elements with a particular CSS class and replace them with widgets.
35.	//
36.	RootPanel.get("slot1").add(button);
37.	RootPanel.get("slot2").add(label);
38.	  }
39.	}
</code></pre>

<h4 id="helloworldgwtxml">3.	配置文件HelloWorld.gwt.xml</h4>
<p>配置文件中包括两个元素。Inherits元素地设置GWT应用的继承信息，而entry-point元素的class属性则用于设置设置GWT应用的主类。</p>

<p>清单3 src\org\vivianj\gwt\HelloWorld.gwt.xml</p>

<pre><code>1.	&lt;module&gt;
2.	
3.		&lt;!-- Inherit the core Web Toolkit stuff.  --&gt;
4.		&lt;inherits name='com.google.gwt.user.User'/&gt;
5.	
6.		&lt;!-- Specify the app entry point class.   --&gt;
7.		&lt;entry-point class='org.vivianj.gwt.client.HelloWorld'/&gt;
8.	  
9.	&lt;/module&gt;
</code></pre>

<h3 id="section-2">结束语</h3>
<p>Ajax是当前热门的Web应用开发技术，Java是企业应用开发中的主流技术，GWT框架将这两种技术合二为一，是我们能够应用Java语言来开发Ajax，在保留Ajax技术的优点基础上，解决了Ajax应用开发、调试困难的缺点。
本文中介绍了GWT的基本知识、主要特性，提供了”HelloWorld！”例子说明使用Java和GWT框架开发Ajax应用的开发、编译、测试过程，并且通过对”HelloWorld！”例子中涉及文件的分析，讲解了使用GWT框架开发Ajax应用的技术细节和约束条件。</p>

<h3 id="section-3">下载资源</h3>
<p>JDK下载地址：<a href="http://java.sun.com"> http://java.sun.com</a></p>

<h3 id="section-4">参考资料</h3>
<p>学习
GWT 在线资源： <a href="http://code.google.com/webtoolkit/gettingstarted.html">http://code.google.com/webtoolkit/gettingstarted.html </a></p>

<p>developerWorks 网站 Ajax 技术资源中心：<a href="http://www.ibm.com/developerworks/cn/xml/ajax/。">http://www.ibm.com/developerworks/cn/xml/ajax/。 </a></p>

<p>获得产品和技术
JDK 下载地址：<a href="http://java.sun.com">http://java.sun.com </a></p>

<p>GWT 下载地址：<a href="http://code.google.com/webtoolkit/">http://code.google.com/webtoolkit/ </a></p>

<p>讨论
GWT 在线FAQ：<a href="http://code.google.com/webtoolkit/faq.html">http://code.google.com/webtoolkit/faq.html </a></p>

<p>GWT 开发者论坛：<a href="http://groups.google.com/group/Google-Web-Toolkit。">http://groups.google.com/group/Google-Web-Toolkit。 </a></p>

<p>参考地址：<a href="http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/">http://www.ibm.com/developerworks/cn/java/j-lo-gwt-intro/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用css3绘制QQ企鹅LOGO]]></title>
    <link href="http://xiebaochun.github.io/blog/2013/09/23/use-css-to-paint-qq/"/>
    <updated>2013-09-23T09:25:00+08:00</updated>
    <id>http://xiebaochun.github.io/blog/2013/09/23/use-css-to-paint-qq</id>
    <content type="html"><![CDATA[<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/result.png" alt="" /></p>

<p><a href="http://download.alloyteam.com/demo/css3-tencent-qq-logo-basic/">CSS3绘制腾讯QQ的企鹅Logo效果</a></p>

<p>今天和大家分享一下使用CSS3绘制腾讯QQ的企鹅Logo的过程。
<!--more-->
## 一、如何使用CSS3来绘制图形？  ##</p>

<p>网络上经常能够看到一些用CSS3绘制的精致图形，它们通常由矩形，圆形，椭圆，三角形,梯形等组合而成。要想绘制我们自己的图形，就要先了解下基本图形的绘制方法了。
一个display：block的元素设定宽高之后表现为矩形。通过设定border-radius可以得到圆角矩形，圆形和椭圆形。</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/border-radius.png" alt="" /></p>

<p>在使用border-radius时，有几点可能需要注意一下：</p>

<ul>
  <li>
    <p>border-radius，可以分别对4个角进行设定。 例如上图：border-top-left-radius: apx bpx;</p>
  </li>
  <li>
    <p>border-xxx-xxx-radius的两个值分别代表着椭圆长轴和短轴长度的一半，通常简写的时候例如border-top-left-radius: 10px;(border-top-left-radius:10px 10px;) 表明长轴和短轴的长度均为20px，也就是半径为10px的圆形（圆角部分）。</p>
  </li>
  <li>
    <p>当使用百分比数值时，a 相对于width， b相对于height</p>
  </li>
</ul>

<p>如果a == width/2, b == height/2，结果就是一个椭圆，与此同时a==b，那么就可以得到一个半径为a的圆形了。
在看三角形之前，首先看看三角形的“绘制者”border，下面的例子：</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/border.png" alt="" /></p>

<pre><code>Css
.test{
border: 20px solid;
border-top-color:#ff0000;
border-right-color:#00ff00;
border-bottom-color:#0000ff;
border-left-color:#FFFF00;
width:100px;
height: 100px;
background: #272822;
}
</code></pre>

<p>将每个boder的颜色值设为不一样，就可以清楚的看到每个border的负责区域，有三角形的雏形了。其实，绘制三角形的原理很简单，如下图</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/triangle.png" alt="" /></p>

<p>我们可以这样去理解一个border所代表的区域，那就是“三角形x2 + 矩形”，以border-bottom为例，
矩形 = width x ( border-bottom-width )
相邻的border交叉的区域构成一个矩形，每个border各负责一半，一个直角三角形。只要将其中的一个border的颜色值设为transparent或者背景色，从视觉上就可以得到一个直角三角形了。</p>

<ul>
  <li>三角形1 = border-left-width x border-bottom-width</li>
  <li>三角形2 = border-right-width x border-bottom-width</li>
</ul>

<table>
  <tbody>
    <tr>
      <td>当width = 0 （height = 0, border-left</td>
      <td> </td>
      <td>border-right）时，我们通过调整border的宽度可以将这两个直角三角形拼接成任意形状的三角形，或者调整width(height)等获得一个梯形，当然梯形也可以通过拼图得到，这样不是更简单吗？。Transform中旋转将为我们提供更多的灵活变化。</td>
    </tr>
  </tbody>
</table>

<h2 id="section">二、绘制我们的企鹅</h2>

<p>结束了对于基本图形部分的一些讨论，开始着手于QQ 企鹅的绘制。
第一步当然是基本框架的绘制了。
通过对手里的Logo图像的观察，按照层次划分来组合最终的效果。选择使用绝对位置position:absolute;来布局各个元素。主要划分为头部，身体，围脖，双手，双脚。
框架的结果图：</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/simple.png" alt="" /></p>

<p>介绍下这个过程中几个比较典型的图形绘制方法：</p>

<h4 id="section-1">1、企鹅的眼睛：</h4>
<p>椭圆，直接设置border-radius:50% 50%; 即可[因为宽高分别为44px和66px，所以也可以这样设定：border-radius: 22px / 33px]</p>

<h4 id="section-2">2、围脖的尾部：</h4>
<p>一个圆角各异的矩形，所以这里需要对几个角分别设定border-radius，微调的结果为</p>

<pre><code>Css
border-bottom-left-radius: 50% 43%;
border-bottom-right-radius: 15px;
border-top-left-radius: 20% 57%;
</code></pre>

<h4 id="section-3">3、企鹅的胳膊：</h4>

<p>手的绘制较为麻烦一点，可以分为上下两个部分，将绘制的结果拼接到一起。那么对于不需要的部分怎么办呢？我们可以将上(下)部分放到一个div(container)中，利用overflow:hidden的属性来截取所要的部分。绘制复杂图形的时候常用的方法就是切割和拼接，将图形切割成一个个简单的小块，通过层叠和旋转变化进行组合。
使用transform:rotate(deg)的时候，优先设定transform-origin属性，会比较方便。设定的点作为中心点，整个图形绕着这个点进行角度变化。例如：transform-origin:bottom left， 使用左下角作为原点。也可以使用具体的像素值和百分比。
在基本的框架线条中比非常多的使用了border-radius用于构造各种曲线条，小企鹅是圆圆胖胖的，:)
接下来就是对只有基本线条的小企鹅进行着色了。着色的过程可以帮助我们调整z-index，也就是各个模块的重叠层次，遮盖了一些无用的线条和框角。</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/basic.png" alt="" /></p>

<p>填充颜色之后的企鹅看起来好多了，可是总感觉有点不对劲。嘴巴的形状不够性感，围脖竟然没折，小企鹅的脚趾去哪了，穿鞋了吗？
剩余的工作就是对这些细节上的问题进行修复，这里主要使用两种图形：</p>

<h4 id="section-4">1、绘制一个斜边三角形，修复嘴唇的层次感：</h4>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/fix1.png" alt="" /></p>

<p>绘制这样一个斜边三角形，步骤分解如图所示：</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/fix1-step.png" alt="" /></p>

<p>先是绘制一个普通三角形，通过逆时针旋转得到一个修复三角形，那么相对称的修复三角形可以通过使用rotateY，绕着Y轴旋转180度，来得到。</p>

<h4 id="section-5">2、绘制一个“小尾巴”</h4>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/fix2.png" alt="" /></p>

<pre><code>Css
border-right: 6px solid black;
width: 100px;
height: 70px;
border-bottom-right-radius: 70px 70px;
</code></pre>

<p>当对一个角应用圆角样式，如果这个角相邻的两个border一个有定义而一个无定义，那么绘制的结果就是由粗到细的“小尾巴了”。[在整个绘制过程中，同一个图形它的绘制方法有很多种，例如一个矩形可以用 width x height构成，也可以由border x height(width)构成，甚至可以由border组合(width = height = 0)构成，根据情况选择吧。]</p>

<p>将这些修复应用到小企鹅上，得到最终的效果图：</p>

<p><img src="http://www.alloyteam.com/wp-content/uploads/2012/10/result.png" alt="" /></p>

<p><a href="http://download.alloyteam.com/demo/css3-tencent-qq-logo-basic/">请点击查看实例DEMO</a>，今天的分享就这么多了，之后会添加一些颜色效果和CSS动画效果，让我们的小企鹅变得迷人，敬请期待！</p>

<p>原文：<a href="http://www.alloyteam.com/2012/10/css3-draw-qq-logo/">http://www.alloyteam.com/2012/10/css3-draw-qq-logo/</a></p>

]]></content>
  </entry>
  
</feed>
